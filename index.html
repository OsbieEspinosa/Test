


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="ctl00_Head1"><meta content="text/html;charset=utf-8" http-equiv="Content-Type" /><meta content="utf-8" http-equiv="encoding" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><meta content="width=device-width, initial-scale=1" name="viewport" /><title>
	ClientLinkÂ® Portal : Support
</title>

    
    <link href="../css/kendo.common.min.css" rel="stylesheet" type="text/css" />

    
    <link href="../css/kendo.default.min.css" rel="stylesheet" type="text/css" />

    <link href="../css/kendo.common-bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../css/kendo.bootstrap.min.css" rel="stylesheet" type="text/css" />
        
    <!-- BootStrap JavaScript -->           
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/js/kendo/jquery.min.js" type="text/javascript"></script>
    <style>html { font-size: 12px; font-family: Arial, Helvetica, sans-serif; }</style>

    
    
    
    

    
    
    
    

    <link href="../css/kendo.dataviz.min.css" rel="stylesheet" type="text/css" />
    <link href="../css/kendo.dataviz.default.min.css" rel="stylesheet" type="text/css" />

    <script src="../js/angular.min.js" type="text/javascript"></script>
    <script src="../js/kendo/kendo.all.min.js" type="text/javascript"></script>

    <link href="/Styles_Webcontent_Areas/Reskin/reset.css" rel="stylesheet" type="text/css" /><link href="/Styles_Webcontent_Areas/Bootstrap/bootstrap.min.css" rel="stylesheet" /><link href="/Styles_Webcontent_Areas/Reskin/introjs.css" rel="stylesheet" type="text/css" /><link href="/Styles_Webcontent_Areas/Reskin/custom.css" rel="stylesheet" type="text/css" /><link href="/Styles_Webcontent_Areas/Reskin/responsive.css" rel="stylesheet" type="text/css" /><link href="../css/main.css" rel="stylesheet" type="text/css" /><link href="../css/support.css" rel="stylesheet" type="text/css" /><link href="../css/dashboard.css" rel="stylesheet" type="text/css" /><link href="../css/profile.css" rel="stylesheet" type="text/css" />
    <script src="../Javascripts_Webcontent_Areas/Utilities2.js" type="text/javascript"></script>
    <script src="../Javascripts_Webcontent_Areas/popup.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery-ui.js"></script>
    <link rel="stylesheet" href="css/jquery-ui.css" />
    <link href="../Styles_Webcontent_Areas/BUPStyle.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
        /* ADD TO A SUPPORT.HTML */
        .NewButton
        {
           
        }
        
        /* ADD TO A SUPPORT.HTMLEND */
        a
        {
            color: #6A6A6A;
        }
        a:hover
        {
            color: #d52427;
            cursor: pointer;
        }
        a:active
        {
            color: #d52427;
        }
        /*a:visited
        {
            color: #6A6A6A;
        }*/
        .tablecontenttitle
        {
            font: Open Sans Semibold;
            font-size: 14px;
            color: #3F3F3F;
        }
        .areatext
        {
            font-size: 16px;
            padding-top: 4px;
        }
        .NewButton
        {
           
            font-family: inherit;
            font-weight: bold;
            font-size: 10px;
            color: White;
            border: 1px solid #5C98C1;
            margin: 1px;
            text-decoration: none;
            cursor: pointer;
            background-color: #0A5564;
            width: 125px;
            height: 16px;
            padding: 6px 7px;
            line-height: 1.5em;
            -moz-border-radius: 4px;
            -webkit-border-radius: 4px;
            border-radius: 4px;
        }
        .myTitleClass
        {
            background-color: Blue;
        }
        .clientname
        {
            font: Open Sans;
            font-size: 26px;
            color: #FFF;
        }
        .primarynav
        {
            font: Open Sans;
            font-size: 12px;
            color: #FFF;
            padding: 15px, 10px;
        }
        .secondarynav
        {
            font: Open Sans;
            font-size: 12px;
            color: #FFF;
            padding: 15px, 20px;
            background: #3C6C73;
        }
        .rowBGlight
        {
            background: #F5F5F5;
        }
        .rowBGdark
        {
            background: #EEE;
        }
        
        .ui-widget-overlay
        {
            opacity: .5;
            background-color: black;
            background-image: none;
        }
        /* Corner radius */
        .ui-corner-all, .ui-corner-top, .ui-corner-left, .ui-corner-tl
        {
            border-top-left-radius: 0px;
        }
        .ui-corner-all, .ui-corner-top, .ui-corner-right, .ui-corner-tr
        {
            border-top-right-radius: 0px;
        }
        .ui-corner-all, .ui-corner-bottom, .ui-corner-left, .ui-corner-bl
        {
            border-bottom-left-radius: 0px;
        }
        .ui-corner-all, .ui-corner-bottom, .ui-corner-right, .ui-corner-br
        {
            border-bottom-right-radius: 0px;
        }
        .ui-widget-header
        {
            background-image: none;
            background-color: #6AADA9;
            padding: 0;
            font-weight: normal;
            font: Open Sans-Light;
        }
        .ui-widget-header .ui-icon
        {
            background-image: url("images/ui-icons_222222_256x240.png");
        }
        .ui-widget
        {
            padding: 0px;
        }
        .ui-dialog .ui-dialog-titlebar
        {
            padding: 15px 1em;
            position: relative;
        }
        .ui-dialog .ui-dialog-title
        {
            color: White;
            font-size: 16px;
            font-family: OpenSans-Regular, 'Open Sans' , 'Helvetica Neue' , Helvetica, Arial, sans-serif;
        }
        .ui-dialog-titlebar-close
        {
            background-image: url("../img/close-button.jpg");
            background-repeat: no-repeat;
            position: absolute;
            right: .6em;
            top: 37% !important;
            width: 27px !important;
            margin: -10px 0 0 0;
            padding: 1px;
            height: 27px !important;
            border: 0px;
            background-position: center center;
        }
        .ui-dialog-titlebar
        {
            border-image-width: 0px;
            border-left-width: 0px;
            border-top-width: 0px;
            border-right-width: 0px;
            border-bottom-width: 0px;
        }
        .ui-dialog-content
        {
            min-height: 107px !important;
        }
        .incidentSection
        {
            text-align:left;
        }
        .k-grid-content a
        {
            font-size: 14px;
        }
        .modalDialog
        {
            position: fixed;
            font-family: Arial, Helvetica, sans-serif;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 99999;
            opacity: 0;
            -webkit-transition: opacity 400ms ease-in;
            -moz-transition: opacity 400ms ease-in;
            transition: opacity 400ms ease-in;
            pointer-events: none;
        }
        .modalDialog:target
        {
            opacity: 1;
            pointer-events: auto;
        }
        .modalDialog > div
        {
            width: 400px;
            position: relative;
            margin: 10% auto;
            padding: 5px 20px 13px 20px;
            border-radius: 10px;
            background: #fff;
            background: -moz-linear-gradient(#fff, #999);
            background: -webkit-linear-gradient(#fff, #999);
            background: -o-linear-gradient(#fff, #999);
        }
        .close
        {
            background: #606061;
            color: #FFFFFF;
            line-height: 25px;
            position: absolute;
            right: -12px;
            text-align: center;
            top: -10px;
            width: 24px;
            text-decoration: none;
            font-weight: bold;
            -webkit-border-radius: 12px;
            -moz-border-radius: 12px;
            border-radius: 12px;
            -moz-box-shadow: 1px 1px 3px #000;
            -webkit-box-shadow: 1px 1px 3px #000;
            box-shadow: 1px 1px 3px #000;
        }
        .close:hover
        {
            background: #00d9ff;
        }
        
        #createAttachments {
            display: table;
            table-layout: fixed;
            width: 90%;
        }
        .CCattachmentsDropWrapper {
            border: 2px solid #eee;
            padding: 0;
            min-height: 0;
            position: relative;
            text-align: center;
            margin-bottom: 16px;
            background-color: #FFF;
        }
        .CCattachmentsDropZone {
            height: auto;
            padding: 0;
            background-color: #FFF;
        }
        .CCattachmentsDropZone .CCattachmentsDropText {
            display: block;
            text-align: left;
            color: #a1a1a1;
            line-height: 17px;
            font-weight: normal;
            width: 100%;
            font-size: 14px;
            margin: 15px 0px 40px 0px;
            padding: 0 20px;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            background-color: #FFF;
        }
        .CCattachmentsBtnWrapper {
            width: 100%;
            height: 100%;
            position: relative;
            top: -7px;
        }
        .CCattachmentsDropZone.k-dropzone-hovered, .CCattachmentsDropWrapper.k-dropzone-hovered {
            background-color: #FFF;
        }
        .CCattachmentsBtn {
            display: block;
            text-indent: 0;
            padding: 10px 40px;
            border: 1px solid #ccc;
            background: transparent;
            border-radius: 4px;
            text-align: center;
            margin: 0px auto 31px auto;
            width: 60%;
            float: none;
            color: #a1a1a1;
            font-size: 12px;
            line-height: inherit;
            text-transform: none;
            font-weight: 400;
        }
        .CCattachmentsBtn.km-widget.km-button .km-text {
            margin-top: 0px;
            display: block;
            padding-bottom: 0px;
            background-color: #FFF;
        }
        #NewRequest .CCuploadWrapper .k-upload {
            border: none;
        }
        #NewRequest .CCuploadWrapper .k-upload > button {
            display: none;
        }
        #NewRequest .CCuploadWrapper .k-upload .k-upload-files {
            padding-bottom: 0;
        }
        #NewRequest .CCuploadWrapper .k-upload-files li:first-child {
            margin-top: 0;
        }
        #NewRequest .CCuploadWrapper .k-upload-files li {
            background: url(../img/jpg.png) no-repeat 5px 50%;
            background-color: #f7f7f7;
            border-color: #f7f7f7;
            color: #36f;
            text-shadow: 0 0 #FFF;
            background-position: 22px 50%;
            display: block;
            border: 1px solid transparent;
            margin: 5px 0;
            overflow: hidden;
            padding: 5px 5px 5px 45px;
            line-height: 12px;
        }
        #NewRequest .CCuploadWrapper .k-upload-files {
            padding: 0;
            overflow: hidden;
            margin: 0;
            float: left;
            font-size: 12px;
            font-weight: 400;
            width: 100%;
            position: relative;
            border-width: 0;
        }
        #NewRequest .CCuploadWrapper .k-upload-files li .file-checkbox {
            left: 5px;
            position: absolute;
            margin: 0;
        }
        #NewRequest .CCuploadWrapper .k-upload-files li .file-name-heading {
            font-size: 12px;
            font-weight: 400;
            display: inline-block;
            max-width: 95%;
            overflow: hidden;
            padding-right: 16px;
            text-overflow: ellipsis;
            vertical-align: middle;
            white-space: nowrap;
        }
        #NewRequest .CCuploadWrapper .k-upload-files li.k-file .k-upload-action {
            display: inline;
            height: 16px;
            margin-top: -8px;
            padding: 0;
            position: absolute;
            right: 5px;
            top: 50%;
            width: 16px;
            background-image: none;
            background-color: #f7f7f7;
        }
        .CCfileAlert {
            color: red;
            padding-bottom: 10px;
            display: none;
            font-size: 16px;
            font-weight: 400;
        }       
        .CCuploadWrapper .k-upload .k-dropzone {
            display: none;
        }
        .CCuploadWrapper em, .CCuploadWrapper strong {
            display: none;
        } 
        
    </style>

    <script type="text/javascript">
            var callerSysIDOrig = callerSysID = "";
            var callerNameOrig = "";
            var locationOrig = "";
            var PhoneOrig = "";
            var company = "";
            var context = "";
            var isTicketingVisible = "";
            var clarifySearchDto =  {"FromTimeZone":null,"ToTimeZone":null};
            $(document).ready(function(){
                if(isTicketingVisible == "false"){
                    document.querySelectorAll(".producttitle")[2].parentElement.parentElement.style.display = "none";
                }
            });

            function ProcessServerResponse(response){
                var args = response.split("|");
                switch(args[0]){
                    case "CLFYC"://Insert New Clarify Incident
                        if (args[1] == "ERROR") {
                            $("#lblNewIncNumber")[0].textContent = "We found an error with your request, please try again";
                            $("#cmdNewIncident")[0].disabled = false;
                        }
                        else {
                            $("#lblNewIncNumber")[0].textContent = "Incident " + args[1] + " created";
                            $("#cmdNewIncident")[0].style.display = "none";
                            $("#cmdClose")[0].style.display = "";
                        }
                        break;
                    case "CLFYA":
                        $("#txtNumber")[0].value = args[1];
                        $("#txtState")[0].value = args[2];
                        $("#txtDetDescription")[0].value = args[3];
                        $("#txtCaller2")[0].value = args[4];
                        $('#LoadingDetails')[0].style.display = 'none';
                        break;
                    default:
                    if (args[1] == "ERROR") {
                            $("#lblNewIncNumber")[0].textContent = "We found an error with your request, please try again";
                            $("#cmdNewIncident")[0].disabled = false;
                        }
                        else {
                            $("#lblNewIncNumber")[0].textContent = "Incident " + args[1] + " created";
                            $("#cmdNewIncident")[0].style.display = "none";
                            $("#cmdClose")[0].style.display = "";
                        }
                        break;
                    break;
                }
            }

            function uploadClick() {
                $("#createAttachmentBtn").click();
            }

            function addCreateUploader() {
                var ul = $("#createAttachmentBtn").data("kendoUpload");
                if (ul) { ul.destroy(); }
                $("#NewRequest .CCuploadWrapper").empty();
                $("#createAttachAlert").hide();
                $('<input type="file" id="createAttachmentBtn" name="createAttachmentBtn" multiple="" accept=".pdf,.csv,.png,.jpeg,.jpg,.doc,.docs,.xlsx,.xls,.docx,.html,.htm,.bmp"/>').appendTo("#NewRequest .CCuploadWrapper").kendoUpload({
                    async: {
                        saveUrl: "../Service/AttachmentsManagement.aspx?sysId=-1",
                        removeUrl: "../Service/AttachmentsManagement.aspx?sysId=-1",
                        autoUpload: false
                    },
                    localization: {
                        dropFilesHere: "",
                        invalidMaxFileSize: "The total file size cannot exceed 3.0 MB"
                    },
                    validation: {
                        maxFileSize: 3000000
                    },
                    template: kendo.template($('#createAttachmentTemplate').html()),
                    dropZone: "#createDropZone",
                    select: function(e) {
                        $("#createAttachAlert").hide();
                        $.each(e.files, function (index, value) {
                            if (value.size > 3000000) {
                                $("#createAttachAlert").show();
                                e.preventDefault();
                                return false;
                            }
                        });
                    },
                    complete: function(e) {
                        app.navigate("#myTickets","fade");
                    }
                });
            }

            function uploadCommit(sysid) {
                var upload = $("#createAttachmentBtn").data("kendoUpload");
                files = upload.getFiles();
                if (files.length > 0) {
                    upload.options.async.saveUrl = "../Service/AttachmentsManagement.aspx?sysId=" + sysid
                    upload.wrapper.find("button.k-upload-selected").click();
                }
            }

            function openKendoWindow(windowName) {
                var win = $('#' + windowName).data('kendoWindow');
                win.open();
                win.center();
                
           
            } // ************************ END openKendoWindow **********************************************

            function closeKendoWindow(windowName) {
                $("#" + windowName).kendoWindow();
                var win = $('#' + windowName).data('kendoWindow');
                win.close();
                window.location.href = '/BUP/support.aspx';
            } // ************************ END closeKendoWindow **********************************************

           function newIncident() 
           {
            var LogDetail="";
            try
            {
                callerSysID = callerSysIDOrig;
                $("#txtCaller")[0].value = callerNameOrig;
                $("#txtPhone")[0].value = PhoneOrig;
                $("#txtLocation")[0].value = locationOrig;
                $("#txtDescriptionx")[0].value = "";
               // $("#txtComments")[0].value = "";
                $("#cmdNewIncident")[0].style.display = "";
                $("#cmdNewIncident")[0].disabled = false;
                $("#cmdClose")[0].style.display = "none";
                $("#lblNewIncNumber")[0].textContent = "";
                addCreateUploader()
                openKendoWindow('NewRequest');
              }
              catch(err) 
              {
               LogDetail= err.meesage.replace(/[&\/\\#, +()$~%.'":*?<>{}]/g, '_'); 
              }
              finally
              { 
                var Url = window.location +"/ServiceNow";
                TrackingDetails(LogDetail,Url);
             }
          }  // ************************ END newIncident **********************************************

            function TrackingDetails (LogDetails,Url)
            {

                    var EmailOrig = document.getElementById('hiddenEmail').value;
                    var ClientCode=document.getElementById('hiddenClientCode').value;
                    var FirstName=document.getElementById('hiddenFirstName').value;
                    var LastName=document.getElementById('hiddenLastName').value;
                    var userid= document.getElementById('hiddentUserNumber').value;
                    var ClientID= document.getElementById('hiddenWorkingClientID').value;
                    var ClientName= document.getElementById('hiddenWorkingClientName').value;
                    var TokenId= document.getElementById('hiddenSessionToken').value;
                    var BrowserName= document.getElementById('hiddenBrowserName').value;
                    
                  $.ajax({
                    type: "POST",
                    url: "Support.aspx/Insertdata",
                    data: "{ 'ClientCode': '" + ClientCode + "', 'URL':'"+ Url + "','EmailAddress':'"+ EmailOrig +"','LogDetails':'"+ LogDetails +"','FristName':'"+ FirstName +"','LastName':'"+ LastName +"','ClientName':'" + ClientName +"','UserID':"+ userid+",'ClientID':"+ClientID +",'TokenId':'" + TokenId +"','BrowserName':'"+BrowserName+ "'}",
                    contentType: "application/json",
                    async: false,
                    success: function (data) {
                         console.log(data);
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) 
                    { 
                       console.log(errorThrown);
                    }       
                });

            }
            function sendNewIncident() {
                if ($("#txtDescriptionx")[0].value == "")
                    $("#lblNewIncNumber")[0].textContent = "Description is required";
                else {
                    $("#cmdNewIncident")[0].disabled = true;
                    $("#lblNewIncNumber")[0].textContent = "Processing request ...";
                    CallServer(context+'C|' + callerSysID + '|' + $('#txtAltPhone')[0].value + '|' + $('#txtLocation')[0].value + '|' + $('#txtDescriptionx')[0].value + '|' + "" )
                      
                }
            } // ************************ END sendNewIncident **********************************************

            function SearchUsers() {
                var value = $("#txtUserSearch")[0].value;
                $("#UsersGrid")[0].innerHTML = "";

                var baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/SNUserWS.asmx/";
                FillSearchGridWithEvents("UsersGrid",
                    { field: "name", dir: "asc" },
                    [
                        { field: "name", operator: "LIKE", value: value, logic: "" }
                    ], 20, baseURL, "getSysUserItems", { company: company }, {},
                    [
                        { field: "name", title: "Name" }
                    ], null,
                    function () { },
                    function (e) {
                        var data = this.dataItem(this.select());
                        $("#txtCaller")[0].value = data.name;
                        $("#txtPhone")[0].value = data.phone;
                        callerSysID = data.sys_id;
                        popup2("UserSearch", "imgCallerSearch", "left");
                    }
                );

                return false;
            } // ***************** END SearchUsers *****************

            function SearchLocations() {
                var field = $("#LocSearchType")[0].value;
                var value = $("#txtLocationSrch")[0].value;
                $("#LocationsGrid")[0].innerHTML = "";

                var baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/SNLocationWS.asmx/";
                jQuery.support.cors = true;

                FillSearchGridWithEvents("LocationsGrid",
                    { field: "name", dir: "asc" },
                    { field: field, value: value, operator: "CONTAINS", logic: "" }, 20,
                    baseURL, "getLocations", { company: company },
                    {},
                    [
                        { field: "name", title: "Name" },
                        { field: "street", title: "Street" },
                        { field: "city", title: "City" },
                        { field: "state", title: "State/Prov" }
                    ], 271,
                    function () { },
                    function (e) {
                        var data = this.dataItem(this.select());
                        $("#txtLocation")[0].value = data.name;
                        popup2("LocationSearch", "imgLocationSearch", "left");
                    }
                );

                return false;
            } // ***************** END SearchLocations *****************

            function getDetails(number) { 
                $('#LoadingDetails')[0].style.display='';
                $('#tblAdditionalComments')[0].innerHTML="";
                
                openKendoWindow('ShowDetails');
                CallServer(context+"A|" + number);
            } // ************************ END getDetails **********************************************

            function getUpdates() {
                CallServer(context+"B|");
            } // ************************ END getUpdates **********************************************

            function FillSearchGridWithEvents(gridName, sort, filter, pageSize, baseURL, wsName, data, fields, columns, height, dataBound, changeEvent, selectable) {
                if (height == null)
                    height = 275;
                if (selectable == null)
                    selectable = "row";

                $("#" + gridName).kendoGrid({
                    height: height,
                    dataSource: {
                        type: "json",
                        serverPaging: true,
                        serverSorting: true,
                        serverFiltering: true,
                        allowUnsort: true,
                        sort: sort,
                        filter: filter,
                        pageSize: pageSize,
                        transport: {
                            read: {
                                url: baseURL + wsName,
                                dataType: "json",
                                type: "POST",
                                contentType: "application/json; charset=utf-8",
                                data: data
                            },
                            parameterMap: function (data, operation) {
                                return kendo.stringify(data);
                            }
                        },
                        schema: {
                            model: {
                                fields: fields
                            },
                            data: function (data) {
                                if (data.d != null && data.d.Data != null)
                                    return data.d.Data.Items;
                            },
                            total: function (data) {
                                if (data.d != null && data.d.Data != null)
                                    return data.d.Data.TotalCount;
                            }
                        }
                    },
                    sortable: true,
                    groupable: false,
                    scrollable: {
                        virtual: true
                    },
                    filterable: false,
                    editable: false,
                    selectable: selectable,
                    columns: columns,
                    dataBound: dataBound,
                    change: changeEvent
                });
            } // ******************* END FillSearchGridWithEvents ***********************************

            function FillGridWithRowTemplatesLoc(gridName,sort,filter,baseURL,wsName,fields,columns,RowTemplate,AltRowTemplate){
                $("#" + gridName).kendoGrid({
                dataSource: {
                            type: "json",
                            serverPaging: true,
                            serverSorting: true,
                            serverFiltering: true,
                            allowUnsort: true,
                            sort: sort,
                            filter: filter,
                            pageSize: 5,
                            transport: {
                                read: {
                                    url: baseURL + wsName,
                                    dataType: "json",
                                    type: "POST",
                                    contentType: "application/json; charset=utf-8",
                                   data: {
                                        company: company
                                    },
                                },
                                parameterMap: function (data, operation) {
                                        return kendo.stringify(data);
                                }
                            },
                            schema: {
                                model: {
                                    fields: fields
                                },
                                data: function (data) {
                                    if (data.d != null && data.d.Data != null)
                                        return data.d.Data.Items;
                                },
                                total: function (data) {
                                    if (data.d != null && data.d.Data != null)
                                        return data.d.Data.TotalCount;
                                }

                            }
                        },
                        height: 150,
                        scrollable: {
                            virtual: true
                        },
                        groupable: false,
                        filterable: false,
                        editable: false,
                        columns: columns,
                        rowTemplate: kendo.template($("#" + RowTemplate).html()),
                        altRowTemplate: kendo.template($("#" + AltRowTemplate).html())
                    });
            } // ******************* END FillGridWithRowTemplates ***********************************

            function formatSNDateString(SNDateString) {
                if (SNDateString == "")
                    return "";
                else {
                    var rawDate = SNDateString.replace('-', '/').replace('-', '/') + ' UTC';
                    var date = new Date(rawDate);
                    var month = (date.getMonth() + 1).toString();
                    if (month.length == 1)
                        month = '0' + month;
                    var day = date.getDate().toString();
                    if (day.length == 1)
                        day = '0' + day;
                    var hours = date.getHours().toString();
                    if (hours.length == 1)
                        hours = '0' + hours;
                    var minutes = date.getMinutes().toString();
                    if (minutes.length == 1)
                        minutes = '0' + minutes;
                    var seconds = date.getSeconds().toString();
                    if (seconds.length == 1)
                        seconds = '0' + seconds;
                    var dateParts = date.toString().split(" ");
                    var fullDate = date.getFullYear().toString() + '-' + month + '-' + day + ' ' + hours + ':' + minutes + ':' + seconds + ' ';
                    try {
                        if (navigator.appVersion.toUpperCase().indexOf('MSIE') >= 0)
                            fullDate = fullDate + dateParts[4];
                        else if (navigator.platform.indexOf('Mac') != -1) //For some unknow reason there are people using Macintosh
                            fullDate = fullDate + dateParts[6];
                        else
                            fullDate = fullDate + dateParts[6].substring(2, 1) + dateParts[7].substring(0, 1) + dateParts[8].substring(0, 1);
                    } catch (e) {
                        fullDate = SNDateString;
                    }
                    return fullDate;
                }
            } // ************************** END formatSNDateString *******************************

            function fixString(originalText) {
                if (originalText.length > 20) {
                    var aux = originalText.split(' ');
                    if (aux.length <= 1)
                        return originalText.replace(/\+/gi, " ");
                    else
                        return originalText;
                }
                else
                    return originalText;
            } // **************** END fixString ************

            function openDetailWindow(incidentnumber) {
            if (incidentnumber.toLowerCase().indexOf("inc") == 0) {
           $("#incidentSlider_detailPane").kendoWindow({
            draggable: true,
            modal: true,
            title: "Incident Summary",
            width: "700px",
            height: "550px",
            visible: false,
            position: {
                top: "2%",
                left: "24%"
            }
        }).data("kendoWindow").open();

         var win = $("#incidentSlider_detailPane").data('kendoWindow');
         win.center();

        $("html, body").animate({ scrollTop: "0px" }, "fast");
           AskInfo("A|" + incidentnumber);
           //$.publish('incidents/searchResults/rePositionDetailWindow');
           }
           else  if (incidentnumber.toLowerCase().indexOf("ritm") == 0) {
            
            $("#requestSlider_detailPane").kendoWindow({
            draggable: true,
            modal: true,
            title: "Request Summary",
            width: "700px",
            height: "550px",
            visible: false,
            position: {
               
                left: "24%",
                top: "2%"
            }
        }).data("kendoWindow").open();
        var win = $("#requestSlider_detailPane").data('kendoWindow');
         win.center();

        $("html, body").animate({ scrollTop: "0px" }, "fast");
           AskInfoReq(incidentnumber);

            }
       }
    </script>
    <script id="IncidentTemplate" type="text/x-kendo-template">
            <tr data-uid="#= uid #">
                <td style="padding:0">
                    <table>
                        <tr>
                            <td class="rowBGlight" style="border-style:none;font-size:12px">
                                 <a href="javascript:void(0)" onclick="openDetailWindow('#: number #')"> #: number # &nbsp; - &nbsp; #: short_description # </a>
                            </td>
                            <td class="rowBGlight  button-container" style="width: 138px; border-style: none;">
                                #switch(incident_state) {
                                    case "New":#  
                                        <div class="button button-open">New</div>   
                                        #break;
                                    case "Active":#
                                        <div class="button button-open">Active</div>
                                        <!-- RED -->
                                        #break;
                                    case "Work Started":#
                                        <div class="button button-open">Work Started</div>
                                        <!-- DARK GRAY --> 
                                        #break;
                                    case "Awaiting User Info":#
                                      <div class="button button-open">Awaiting User Info</div>
                                        <!-- YELLOW ORANGE-->
                                        #break;
                                    case "Awaiting Evidence":#
                                        <div class="button button-open">Awaiting Evidence</div>
                                        <!-- LIGHT YELLO ORANGE --> 
                                        #break;
                                    case "Awaiting Problem":#
                                        <div class="button button-open">Awaiting Problem</div>
                                        <!-- GREEN -->
                                        #break;
                                    case "Awaiting Change":#
                                        <div class="button button-open">Awaiting Change</div>
                                        <!-- DARK YELLOW ORANGE --> 
                                        #break;
                                    case "Awaiting Vendor":#
                                        <div class="button button-open">Vendor</div>
                                        <!-- BROWN --> 
                                        #break;
                                    case "Resolved":#
                                        <div class="button button-completed">Resolved</div>
                                        <!-- DARK GREEN --> 
                                        #break;
                                    case "Closed":#
                                        <div class="button button-completed">Closed</div>
                                        <!-- BLACK GREEN -->
                                        #break;
                                    default:#
                                        <div class="button NewButton">#: incident_state # </div>
                                        <!-- BLUE PURPLE -->
                                        #break;
                                }#
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
    </script>
    <script id="IncidentTemplateAlt" type="text/x-kendo-template">
            <tr data-uid="#= uid #" class="k-alt">
                 <td style="padding:0">
                    <table>
                        <tr>
                            <td class="rowBGdark" style="border-style:none;font-size:12px">
                                <a href="javascript:void(0)" onclick="openDetailWindow('#: number #')"> #: number # &nbsp; - &nbsp; #: short_description # </a>
                            </td>
                            <td class="rowBGdark  button-container" style="width: 138px; border-style: none;">
                                #switch(incident_state) {
                                    case "New":#
                                        <div class="button button-open">New</div>   
                                        #break;
                                    case "Active":#
                                        <div class="button button-open">Active</div>
                                        <!-- RED -->
                                        #break;
                                    case "Work Started":#
                                        <div class="button button-open">Work Started</div>
                                        <!-- DARK GRAY --> 
                                        #break;
                                    case "Awaiting User Info":#
                                        <div class="button button-open">Awaiting User Info</div>
                                        <!-- YELLOW ORANGE-->
                                        #break;
                                    case "Awaiting Evidence":#
                                        <div class="button button-open">Awaiting Evidence</div>
                                        <!-- LIGHT YELLO ORANGE --> 
                                        #break;
                                    case "Awaiting Problem":#
                                        <div class="button button-open">Awaiting Problem</div>
                                        <!-- GREEN -->
                                        #break;
                                    case "Awaiting Change":#
                                        <div class="button button-open">Awaiting Change</div>
                                        <!-- DARK YELLOW ORANGE --> 
                                        #break;
                                    case "Awaiting Vendor":#
                                        <div class="button button-open">Vendor</div>
                                        <!-- BROWN --> 
                                        #break;
                                    case "Resolved":#
                                        <div class="button button-completed">Resolved</div>
                                        <!-- DARK GREEN --> 
                                        #break;
                                    case "Closed":#
                                        <div class="button button-completed">Closed</div>
                                        <!-- BLACK GREEN -->
                                        #break;
                                    default:#
                                        <div class="button NewButton">#: incident_state # </div>
                                        <!-- BLUE PURPLE -->
                                        #break;
                                }#
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
    </script>
    <script id="AdditionalCommentsRowTemplate" type="text/x-kendo-template">
            <tr data-uid="#= uid #">
                <td style="word-wrap: break-word"><strong>#: formatSNDateString(sys_created_on) # <span style="color:Blue">#: sys_created_by # </span></strong><BR>
                #var data = value.split('\n');
                for(i=0;i<=data.length-1;i++)
                {#
                 #: fixString(data[i]) #
                    <BR>
                #}#
                </td>
            </tr>
    </script>
    <script id="AdditionalCommentsAltRowTemplate" type="text/x-kendo-template">
            <tr data-uid="#= uid #" class="k-alt">
                <td style="word-wrap: break-word"><strong>#: formatSNDateString(sys_created_on) # <span style="color:Blue">#: sys_created_by # </span></strong><BR>
                #var data = value.split('\n');
                for(i=0;i<=data.length-1;i++)
                {#
                 #: fixString(data[i]) #
                    <BR>
                #}#
                </td>
            </tr>
    </script>
    <script id="createAttachmentTemplate" type="text/x-kendo-template">
        <input class="file-checkbox" data-filename="#:files[0].name#" data-title="#:files[0].name#" type="checkbox" value="#:files[0].name#" checked>
        <span class='file-name-heading' title="#:files[0].name#">#:files[0].name#</span>
        <span class='file-noupload-error'>#:('validationErrors' in files[0]) !== false ? 'Size cannot exceed 3 MB' : ''#</span>
        <span class='k-progress'></span>
        <button type='button' class='k-upload-action'></button>
    </script>
</head>
<body>
    <form name="aspnetForm" method="post" action="./Support.aspx" onsubmit="javascript:return WebForm_OnSubmit();" onkeypress="javascript:return WebForm_FireDefaultButton(event, 'ctl00_Login__signInButton')" id="aspnetForm">
<div>
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__LASTFOCUS" id="__LASTFOCUS" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUJMzU1OTk1NTQ0DxYCHhNDb250YWluZXJMb2NrSWRMaXN0MswBAAEAAAD/////AQAAAAAAAAAEAQAAAH9TeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0YDFbW1N5c3RlbS5TdHJpbmcsIG1zY29ybGliLCBWZXJzaW9uPTQuMC4wLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49Yjc3YTVjNTYxOTM0ZTA4OV1dAwAAAAZfaXRlbXMFX3NpemUIX3ZlcnNpb24GAAAICAkCAAAAAAAAAAAAAAARAgAAAAAAAAALFgJmD2QWAgIDD2QWDAIDD2QWBGYPZBYEZg8WAh4HVmlzaWJsZWgWAgIDDw8WAh4LTmF2aWdhdGVVcmwF0wFodHRwOi8vc291cmNlcWMuY29tcHVjb20uY29tL3Jlc291cmNlcy90b29scy9jb250ZW50bWFuYWdlbWVudC9jb250ZW50YXJlYS9jb250ZW50YXJlYWVkaXQuYXNweD9Db250ZW50QXJlYVR5cGVJRD0yMDQwJlJldHVyblRpdGxlPVN1cHBvcnQmUmV0dXJuVXJsPWh0dHAlM2ElMmYlMmZwb3J0YWxxYy5jb21wdWNvbS5jb20lM2E4MDgwJTJmQlVQJTJmU3VwcG9ydC5hc3B4ZGQCBA8WAh8BaGQCAQ9kFgRmDxYCHwFoFgICAw8PFgIfAgXTAWh0dHA6Ly9zb3VyY2VxYy5jb21wdWNvbS5jb20vcmVzb3VyY2VzL3Rvb2xzL2NvbnRlbnRtYW5hZ2VtZW50L2NvbnRlbnRhcmVhL2NvbnRlbnRhcmVhZWRpdC5hc3B4P0NvbnRlbnRBcmVhVHlwZUlEPTIwNDImUmV0dXJuVGl0bGU9U3VwcG9ydCZSZXR1cm5Vcmw9aHR0cCUzYSUyZiUyZnBvcnRhbHFjLmNvbXB1Y29tLmNvbSUzYTgwODAlMmZCVVAlMmZTdXBwb3J0LmFzcHhkZAIEDxYCHwFoZAIFDw8WBB4EVGV4dAUGQWRlY2NvHgdUb29sVGlwBQZBZGVjY29kZAIHDw8WAh8BZ2QWBgIBD2QWAgIBDw8WAh4ISW1hZ2VVcmwFiwEvd2ViY29udGVudC9sb2dvcy8yMDkwL0JVUF9hY2NvdW50X2xvZ28uanBnP3RpbWU9NjM2NTEyNTc5NDI2NjQyNzAzP3RpbWU9NjM2NTk2MTExNDQ4NTc3OTE2P3RpbWU9NjM2NTk2MTExODgzMDQ2MjcxP3RpbWU9NjM3Mjc4MjUxNjE1NzAzOTEyZGQCAg8PFgQfAwUGQWRlY2NvHwFnZGQCAw8WAh8BZxYEAgEPDxYEHwMFEFJvYmVydG8gRXNwaW5vc2EfBAUQUm9iZXJ0byBFc3Bpbm9zYWRkAgMPFgIfAWdkAgkPDxYCHwFoZGQCCw9kFgQCBQ9kFgRmDxYCHwFoFgICAw8PFgIfAgXTAWh0dHA6Ly9zb3VyY2VxYy5jb21wdWNvbS5jb20vcmVzb3VyY2VzL3Rvb2xzL2NvbnRlbnRtYW5hZ2VtZW50L2NvbnRlbnRhcmVhL2NvbnRlbnRhcmVhZWRpdC5hc3B4P0NvbnRlbnRBcmVhVHlwZUlEPTIwMDQmUmV0dXJuVGl0bGU9U3VwcG9ydCZSZXR1cm5Vcmw9aHR0cCUzYSUyZiUyZnBvcnRhbHFjLmNvbXB1Y29tLmNvbSUzYTgwODAlMmZCVVAlMmZTdXBwb3J0LmFzcHhkZAIEDxYCHwFoZAIHD2QWBGYPFgIfAWgWAgIDDw8WAh8CBdMBaHR0cDovL3NvdXJjZXFjLmNvbXB1Y29tLmNvbS9yZXNvdXJjZXMvdG9vbHMvY29udGVudG1hbmFnZW1lbnQvY29udGVudGFyZWEvY29udGVudGFyZWFlZGl0LmFzcHg/Q29udGVudEFyZWFUeXBlSUQ9MjAwNSZSZXR1cm5UaXRsZT1TdXBwb3J0JlJldHVyblVybD1odHRwJTNhJTJmJTJmcG9ydGFscWMuY29tcHVjb20uY29tJTNhODA4MCUyZkJVUCUyZlN1cHBvcnQuYXNweGRkAgQPFgIfAWhkAg0PZBYEAgEPDxYEHwMFEFJvYmVydG8gRXNwaW5vc2EeB0VuYWJsZWRoZGQCBQ8PFgQfAwUdUm9iZXJ0by5Fc3Bpbm9zYUBjb21wdWNvbS5jb20fBmhkZGSW2fAhR33+38xqDq+idIQ3UpvshQ==" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>


<script src="/WebResource.axd?d=gP5G-LId9HUfAFogo9Os6ySAqq_efTrh8EKrQgQIZDCY1K8EAErQWrYdivzuM3b1m8TWMAP8fU_JLJ89ckAug1cdRh81&amp;t=637100645640000000" type="text/javascript"></script>


<script type="text/javascript">
//<![CDATA[
if (typeof(setSubmitOnceEnabled) == 'function') setSubmitOnceEnabled(true);function CallServer(args) {WebForm_DoCallback('__Page',args,ProcessServerResponse,"",null,false);}//]]>
</script>

<script src="/ScriptResource.axd?d=vyaOPjadHCDzxjfZ96gqMFlF52njrqIFsbhry90tsje_EoqVxV0JRQpv3B5tm5RbQrDzcxwQcJ2RVwX15wdRwYrguuF4eZqfDiS6MfNtOb8ZAEJT4VBSZ68325CQ4TBGci3mNGGPCzJKUkAagxyiIiA4tfw1&amp;t=5f65bdf4" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=0xsfFQMvPtw-CL1AeuNsDmtGkXycnCr2qLQFn0A7dNhZ3bH_j-IX8HlrNNodZBZjX_a4Ddic7o3T6um_t9R4WYbkuqlXsGHLKkhx2rLCMoR0dGG86Yk9BgxBcRx2TFvNG2rfSaVrc9O28dtPKVwvYlxq8Gk1&amp;t=ffffffffecf19baa" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=Os0ampcE0_NHf1g8e7YsbET__IxdAh-_2D_dftBkT_zh8hv38nuIjD3hlgYgMMirFTCINWjp3i0_4cJslEwFZE_uZcNLCF2zWyw8NfARlq78grHoRMdHWm3MQmghMRo5n-22sQseEWwRLhUyk2_slbZEbM2igLcqKE28Rtt_Yrguxpnf0&amp;t=ffffffffecf19baa" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
function WebForm_OnSubmit() {
if (typeof(ValidatorOnSubmit) == "function" && ValidatorOnSubmit() == false) return false;
return true;
}
//]]>
</script>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="0BE77ACC" />
</div>

    <div id="forgeRock_recoveryPane" style="display: none; margin: 0px; border: 0px; padding: 0px ;margin-left:0px;" >
        

<script src="../js/kendo/kendo.all.min.js" type="text/javascript"></script>
<!--<link href="../css/kendo.common.min.css" rel="stylesheet" type="text/css" />-->
<!--<link href="../css/kendo.default.min.css" rel="stylesheet" type="text/css" />-->
<link href="../Styles_Webcontent_Areas/BUPStyle.css" rel="stylesheet" type="text/css" />
<link href="../Common/ForgeRock/css/AccountRecovery.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="../Common/ForgeRock/js/FRProfileTools.js"></script>

<script type="text/javascript" src="../js/defiant.min.js"></script>
<script type="text/javascript" src="../webcontent/Areas/PortalSolution/Javascripts/phoneParser.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type='text/css'>

<div>
    <div id="RecoveryDiv" class="DetailsTitle" style="padding: 0px; height: 500px;" 
        data-role="window" 
        data-modal="true" 
        data-resizable="false" 
        data-draggable="false"
        data-title="User Account Recovery Setup" 
        data-bind="visible: isVisible, events: { activate: onOpen }">
        <table cellpadding="0" cellspacing="0" style="width:100%; text-align:left; color:#3d3d3d">
            <tr>
                <td align="center" style="font-size:13px; padding:20px 8px 25px 8px;"><div style="width: 500px;">We need some more information from you so that you can reset your password or unlock your account in the future.</div></td>
            </tr>
            <tr>
                <td>
                    <div style="padding:8px 8px 8px 8px; height: 337px; overflow-y: scroll; overflow-x: hidden;" id="mainScroll">
                        <table cellpadding="0" cellspacing="0" style="width:100%; text-align:left; color:#3d3d3d">
                            <tr>
                                <td colspan="2" style="text-align:left; font-size:13px; padding:5px 5px 5px 5px">Recovery Email</td>
                            </tr>
                            <tr>
                                <td colspan="2" style="text-align:left; padding:5px 20px 5px 20px">
                                    <input class="k-textbox" name="recEmail" id="recEmail" style="width: 100%; height: 30px;"  data-bind="value: recoveryItems.Mail.RecoveryEmail, events: { keyup: onReturn }" placeholder="Type your Email Address" />
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" style="text-align:left; font-size:13px; padding:5px 5px 5px 5px">Mobile Number</td>
                            </tr>
                            <tr>
                                <td id="phonecountrycodetd" style=" padding:5px 0px 25px 20px; border-bottom: 1px solid #D1D1D1; width: 20%;">
                                    <input id="phonecountrycode" style="width: 105px;"
                                    data-role="dropdownlist"
                                    data-text-field="countryname"
                                    data-value-field="imgname"
                                    data-bind="value: countries.selectedCountry, source: countries.countryList"
                                    data-template="ddtemplate"
                                    data-value-template="ddvtemplate"/>
                                </td>
                                <td style="text-align:left; padding:5px 20px 25px 5px; border-bottom: 1px solid #D1D1D1; width: 80%">
                                    <input data-role="maskedtextbox"
                                           data-mask=""
                                           data-prompt-char=" "
                                           id="recPhone" 
                                           name="recPhone" 
                                           data-bind="value: recoveryItems.xfrMobile.Mobile, events: { keyup: onReturn }, mask: countries.selectedCountry.mask" 
                                           style="width: 100%;" 
                                           placeholder="Type your mobile Phone #"/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" style="text-align:left; font-size:13px; padding:25px 5px 5px 5px" id="preDefText">Predefined Questions</td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <input id="preDefMarker" name="preDefMarker" type="hidden" />
                                    <table style="width:100%;">
                                        <tbody id="preDefQPanel" data-bind="source: recoveryItems.preDefinedQuestions.questions" data-template="preDefQTemplate"></tbody>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" style="text-align:left; font-size:13px; padding:10px 5px 5px 5px" id="customQuesHeaderCell">Custom Questions</td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <table style="width:100%;">
                                        <tbody id="customQPanel" data-bind="source: recoveryItems.customQuestions.questions" data-template="customQTemplate"></tbody>
                                    </table>
                                </td>
                            </tr>

                        </table>
                    </div>
                </td>
            </tr>
            <tr>
                <td align="right" style="border-top:1px solid #D1D1D1; padding:16px 20px 5px 5px;">
                    <input id="cmdUpdateProfile" class="button" type="button" value="Submit" data-bind="click: updateProfile" />
                </td>
            </tr>

        </table>
    </div>
    <div id="PassChangeDiv" class="DetailsTitle" style="padding: 0px; height: 500px;" 
        data-role="window" 
        data-modal="true" 
        data-resizable="false" 
        data-draggable="false"
        data-title="Password Change" 
        data-bind="events: { activate: onOpen }">
       <table class="FRformTable" cellpadding="0" cellspacing="0">
            <tr>
                <td align="center" class="FRformHeadTextCell">
                    <div class="FRformHeadText">
                        Please change your password to proceed.
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div id="FRformPassChangeContent">
                        <table cellpadding="0" cellspacing="0" class="FRformContentTable">
                            <tr>
                                <td class="FRformInputLabelCell">New Password</td>
                            </tr>
                            <tr>
                                <td class="FRformInputCell">
                                    <input type="password" class="k-textbox FRformInput" name="newPass" id="newPass" placeholder="Type new Password" 
                                           data-bind="value: password.password, events: { keyup: validatePasswords, blur: checkWithOldPassword }"
                                           data-value-update="keyup"/>
                                </td>
                            </tr>
                            <tr>
                                <td class="FRformInputLabelCell">Confirm New Password</td>
                            </tr>
                            <tr>
                                <td class="FRformInputCell">
                                    <input type="password" class="k-textbox FRformInput" name="newPassConfirm" id="newPassConfirm" placeholder="Retype new Password" 
                                           data-bind="value: password.confirmPassword, events: { keyup: onReturn }"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <ul class="policies" 
                                        id="policiesList"
                                        data-bind="source: passwordPolicy.policies"
                                        data-template="pwPolicyTemplate"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>
            <tr>
                <td align="right" class="FRformSubmitCell">
                    <input id="cmdChangePassword" class="button" type="button" value="Submit" data-bind="click: submitPass"/>
                </td>
            </tr>
        </table>
    </div>
</div>

            <style>
                #phonecountrycodetd .selected-value {
                    display: inline-block;
                    width: 24px;
                    height: 24px;
                    background-size: 100%;
                    font-size: 15px;
                    vertical-align: top;
                    margin: 0px 10px 0px 5px;
                }

                
                #phonecountrycode-list .k-item > span {
                    display: inline-block;
                    vertical-align: middle;
                    font-size: 15px;
                    vertical-align: top;
                    margin: 2px 5px 2px 5px;
                }

                #phonecountrycode-list .k-item > span:first-child {
                    vertical-align: middle;
                    width: 24px;
                    height: 24px;
                    background-size: 100%;
                    background-repeat: no-repeat;
                    padding-top: 0px;
                }

                #RecoveryDiv .k-dropdown-wrap {
                    height: 28px;
                }
                
                #phonecountrycode-list {
                    width: 150px!important;
                }

            </style>

<script type="text/x-kendo-template" id="ddtemplate">
    <span class="k-state-default" style="background-image: url('/webcontent/portal/images/flags/#:imgname#')"></span><span style="width:25px;">#:countryname#</span><span>#:cc#</span>
</script>

<script type="text/x-kendo-template" id="ddvtemplate">
    <span class="selected-value" style="background-image: url('/webcontent/portal/images/flags/#:imgname#')"></span><span>#:cc#</span>
</script>

<script type="text/x-kendo-template" id="preDefQTemplate">
        <tr>
            <td style="text-align:left; padding:5px 0px 20px 0px;">
                    <div style="padding:5px 20px 5px 20px;" id="predefques-#:id#_div"><input id="predefques-#:id#" name="predefques-#:id#" data-role="dropdownlist" data-bind="value: selectedValue, source: questionSet" data-text-field="question" data-value-field="questionId" data-auto-bind="false" style="width:100%"/></div>
                    <div style="text-align:left;font-size:13px;padding:5px 5px 1px 20px;">Answer</div>
                    <div style="text-align:left;padding:1px 20px 5px 20px;"><input id="predefanswer-#:id#" name="predefanswer-#:id#" class="k-textbox" data-bind="value: selectedValue.answer, events: { blur: preDefinedBlur, focus: preDefinedFocus, keyup: onReturn }" style="width: 100%; height: 30px;" placeholder="Type an Answer"/></div>
            </td>
        </tr>
</script>
<script type="text/x-kendo-template" id="customQTemplate">
        <tr>
            <td style="text-align:left; padding:5px 0px 20px 0px;">
                    <div style="padding:5px 20px 5px 20px;"><input id="customques-#:id#" name="customques-#:id#" class="k-textbox" data-bind="value: question, events: { keyup: customQuestionChange }" style="width:100%; height: 30px;" placeholder="Type a Question"/></div>
                    <div style="text-align:left;font-size:13px;padding:5px 5px 1px 20px;">Answer</div>
                    <div style="text-align:left;padding:1px 20px 5px 20px;"><input id="customanswer-#:id#" name="customanswer-#:id#" class="k-textbox" data-bind="value: answer, events: { blur: customBlur, focus: customFocus, keyup: onReturn }" style="width: 100%; height: 30px;" placeholder="Type an Answer"/></div>
            </td>
        </tr>
</script>
    <script type="text/x-kendo-template" id="pwPolicyTemplate">
        <li class='invalid-policy' data-bind="css: { validated-policy: isCompliant }">
            <span data-bind="text: policyDescription"/>
        </li>
    </script> 

<script type="text/javascript">

    var thisClientIP = "187.190.193.5"

    kendo.data.binders.widget.mask = kendo.data.Binder.extend({
        init: function (widget, bindings, options) {
            kendo.data.Binder.fn.init.call(this, widget.element[0], bindings, options);
            this.widget = widget;
        },
        refresh: function () {
            var value = this.bindings.value.get()
            var value = !value ? "" : value.replace(/\/D/g, "");
            var maskvalue = this.bindings.mask.get();
            this.widget.setOptions({ mask: maskvalue });
            if (value) { this.widget.value(value); }
        }
    })

    if (typeof JSON.clone !== "function") {
        JSON.clone = function (obj) {
            return JSON.parse(JSON.stringify(obj));
        };
    }

    var logOffDS = new kendo.data.DataSource({
        transport: {
            read: {
                url: function () {
                    return window.location.protocol + "//" + window.location.host + "/WebServices/UtilityServicesWS.asmx/LogOff";
                },
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=UTF-8",
                data: function () {
                    return {};
                }
            },
            parameterMap: function (data, operation) {
                return kendo.stringify(data);
            }
        },
        schema: {
            data: function (data) {
                window.location = window.location.origin;
                return [];
            }
        }
    });

    function closewin(whichwin, logout) {
        var html = jQuery('html');
        html.css('overflow', 'scroll');
        kendo.ui.progress($("#" + whichwin + "Div"), false);
        var windowWidget = $("#" + whichwin + "Div").data("kendoWindow");
        windowWidget.close();
        if (whichwin == "PassChange" && logout) {
            logOffDS.read();
        }
    }

    function getCC(phonenum, countrylist) {
        phonenum = phonenum.replace(/\D/g,'');
        var match = [];
        if (phonenum.length <= 10) {
            match = JSON.search(countrylist, '//*[cc="+1"]');
            if (match.length != 0) { return match[0]; }
        }
        for (j = 3; j >= 0; j--) {
            var prefix = "+" + phonenum.substring(0, j);
            match = JSON.search(countrylist, '//*[cc="' + prefix + '"]');
            if (match.length > 0) { break; }
        }
        if (match.length == 0) { return countrylist[0]; }
        return match[0];
    }

    function getPhoneDetails(phonenum) {
        var tempPhoneObj = parsePhone(phonenum);
        if (tempPhoneObj != null) {
            if ((tempPhoneObj.countryCode != null && tempPhoneObj.countryCode != "nothing") &&
            (tempPhoneObj.areaCode != null && tempPhoneObj.areaCode != "nothing") &&
            (tempPhoneObj.number != null && tempPhoneObj.number != "nothing") &&
            (tempPhoneObj.countryISOCode != null && tempPhoneObj.countryISOCode != "nothing")) {
                tempPhoneObj.basenumber = tempPhoneObj.areaCode + tempPhoneObj.number;
                tempPhoneObj.isValid = true;
            } else {
                tempPhoneObj.basenumber = phonenum;
                tempPhoneObj.countryISOCode = "US";
                tempPhoneObj.isValid = false;
            }
        } else {
            tempPhoneObj = { "countryCode": null, "areaCode": null, "number": null, "countryISOCode": "US", "basenumber": phonenum, "isValid": false }
        }
        return tempPhoneObj;
    }

    function getCountry(phoneObj, countrylist) {
        var match = JSON.search(countrylist, '//*[countryname="' + phoneObj.countryISOCode + '"]');
        if (match.length == 0) {
            match = JSON.search(countrylist, '//*[countryname="US"]');
        }
        return match[0];
    }

    function scrollToInvalid(element, scrollcontainerid) {
        var container = $('#' + scrollcontainerid)
        container.animate({
            scrollTop: element.offset().top - container.offset().top + container.scrollTop()
        }, 800);
    }

    var args = "";

    var pwPolicyDS = new kendo.data.DataSource({
        transport: {
            read: {
                url: function () {
                    return window.location.protocol + "//" + window.location.host + "/WebServices/PWResetWS.asmx/FetchForceChangePasswordUpdatePolicy";
                },
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=UTF-8",
                data: function () {
                    kendo.ui.progress($("#PassChangeDiv"), true);
                    return { sessiondetails: { "sessionId": null, "clientIP": thisClientIP} };
                }
            },
            parameterMap: function (data, operation) {
                return kendo.stringify(data);
            }
        },
        schema: {
            errors: function (response) {
                response = JSON.parse(response.d.Data.Items)
                if (response.result != "success") {
                    return response.message;
                }
                return false;
            },
            data: function (data) {
                if (data.d != null) {
                    response = JSON.parse(data.d.Data.Items)
                    if (response.result) {
                        if (response.result == "success") {
                            for (var i = 0; i < response.policies.length; i++) {
                                response.policies[i].isCompliant = false;
                            }
                            passChangeViewModel.set("passwordPolicy", response);
                            passChangeViewModel.set("passwordhistoryfail", false);
                        } else {
                            alert("Unknown Webservice error");
                            closewin('PassChange', false);
                        }
                    }
                }
                kendo.ui.progress($("#PassChangeDiv"), false);
                return [response];
            }
        },
        error: function (e) {
            var errortxt = e.errors;
            if (e.errors == undefined) { errortxt = e.errorThrown; }
            alert("Webservice error: " + errortxt);
            this.cancelChanges();
            closewin('PassChange', false);
        }
    });

    var pwHistoryDS = new kendo.data.DataSource({
        transport: {
            read: {
                url: function () {
                    return window.location.protocol + "//" + window.location.host + "/WebServices/PWResetWS.asmx/ValidatePasswordhistory2";
                },
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=UTF-8",
                data: function () {
                    return { loginDetails: { "mail": null, "password": null, "source": null, "clientIP": null, "newPassword": passChangeViewModel.get("password.password"), "sessionId": null} };
                }
            },
            parameterMap: function (data, operation) {
                return kendo.stringify(data);
            }
        },
        schema: {
            data: function (data) {
                if (data.d != null) {
                    response = JSON.parse(data.d.Data.Items)
                    if (response.result) {
                        passChangeViewModel.set("invalidPass", false);
                        var pass_policy = passChangeViewModel.get("passwordPolicy");
                        if (response.result == "success") {
                            passChangeViewModel.set("passwordhistoryfail", false);
                            for (var i = 0; i < pass_policy.policies.length; i++) {
                                var policy = pass_policy.policies[i];
                                if (!policy.policyRegularExpression) {
                                    passChangeViewModel.set("passwordPolicy.policies[" + i + "].isCompliant", true);
                                }
                            }
                        } else if (response.result == "fail" && response.reason == "policyvalidationfailed") {
                            passChangeViewModel.set("passwordhistoryfail", true);
                            for (var i = 0; i < pass_policy.policies.length; i++) {
                                var policy = pass_policy.policies[i];
                                if (!policy.policyRegularExpression) {
                                    passChangeViewModel.set("passwordPolicy.policies[" + i + "].isCompliant", true);
                                    for (var j = 0; j < response.failedpolicies.length; j++) {
                                        if (response.failedpolicies[j][pass_policy.policies[i].policyName] == false) {
                                            passChangeViewModel.set("passwordPolicy.policies[" + i + "].isCompliant", false);
                                            passChangeViewModel.set("passwordhistoryfail", true);
                                            passChangeViewModel.set("invalidPass", true);
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                return [ response ];
            }
        }
    });

    var pwChangeDS = new kendo.data.DataSource({
        transport: {
            read: {
                url: function () {
                    return window.location.protocol + "//" + window.location.host + "/WebServices/PWResetWS.asmx/ForceChangeFRPassword";
                },
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=UTF-8",
                data: function () {
                    return { loginDetails: { "mail": null, "password": null, "source": null, "clientIP": thisClientIP, "newPassword": passChangeViewModel.get("password.password"), "sessionId": null} };
                }
            },
            parameterMap: function (data, operation) {
                return kendo.stringify(data);
            }
        },
        schema: {
            errors: function (response) {
                response = JSON.parse(response.d.Data.Items)
                if (response.result != "success" && !(response.result == "fail" && response.reason == "policyvalidationfailed")) {
                    return response.message;
                }
                return false;
            },
            data: function (data) {
                if (data.d != null) {
                    response = JSON.parse(data.d.Data.Items)
                    if (response.result) {
                        if (response.result == "success") {
                            alert("Password was changed successfully. You will now be redirected and must log in again.")
                            closewin('PassChange', true);
                        } else if (response.result == "fail" && response.reason == "policyvalidationfailed") {
                            alert("Password not changed: " + response.message);
                        }
                    }
                }
                kendo.ui.progress($("#PassChangeDiv"), false);
                return [response];
            }
        },
        error: function (e) {
            var errortxt = e.errors;
            if (e.errors == undefined) { errortxt = e.errorThrown; }
            alert("Webservice error: " + errortxt);
            this.cancelChanges();
            closewin('PassChange', false);
        }
    });

    var isPassValid = false;

    $("#PassChangeDiv").kendoValidator({
        validateOnBlur: false,
        rules: {
            customRule1: function (input) {
                if (input.is("[id='newPass'], [id='newPassConfirm']")) {
                    var val = !input.val() ? "" : input.val();
                    isPassValid = val.replace(/ /gi, "") != "";
                    if (!isPassValid) { scrollToInvalid(input, "FRformPassChangeContent") }
                    return isPassValid;
                }
                return true;
            },
            customRule2: function (input) {
                if (input.is("[id='newPassConfirm']") && isPassValid) {
                    var val = !input.val() ? "" : input.val();
                    var val2 = !$("#newPass").val() ? "" : $("#newPass").val();
                    isPassValid = val == val2;
                    if (!isPassValid) { scrollToInvalid(input, "FRformPassChangeContent") }
                    return isPassValid;
                }
                return true;
            },
            customRule3: function (input) {
                if (input.is("[id='newPass']") && isPassValid) {
                    var val = !input.val() ? "" : input.val();
                    passChangeViewModel.validatePasswords();
                    isPassValid = !passChangeViewModel.get("invalidPass") && !passChangeViewModel.get("passwordhistoryfail");
                    if (!isPassValid) { scrollToInvalid(input, "FRformPassChangeContent") }
                    return isPassValid;
                }
                return true;
            }
        },
        messages: {
            customRule1: "Cannot be blank",
            customRule2: "Password fields must match",
            customRule3: "Password policy violation"
        }
    });

    var FRPassValidator = $("#PassChangeDiv").data("kendoValidator");

    var passChangeViewModel = kendo.observable({
        isOldPassword: false,
        passwordhistoryfail: false,
        password: { "password": null, "confirmPassword": null },
        passwordPolicy: { "policies": [] },
        invalidPass: true,
        onOpen: function (e) {
            kendo.ui.progress($("#PassChangeDiv"), true);
            passChangeViewModel.getPasswordPolicy();
        },
        onReturn: function (e) {
            if (e.which === 13) {
                this.submitPass(e);
                return;
            }
        },
        checkWithOldPassword: function (e) {
            if (this.get("password.password")) {
                pwHistoryDS.read();
            }
        },
        undoClearPassword: function (e) {
            this.set("password.password", "");
            this.set("password.confirmPassword", "");
            this.set("isOldPassword", true);
        },
        getPasswordPolicy: function (e) {
            passChangeViewModel.undoClearPassword();
            pwPolicyDS.read();
        },
        validatePasswords: function (e) {
            this.set("invalidPass", false);
            pass_policies = this.get("passwordPolicy.policies");
            passtest = this.get("password.password");
            for (var i = 0; i < pass_policies.length; i++) {
                var policy = pass_policies[i];
                var regEx = new RegExp(policy.policyRegularExpression);
                if (policy.policyRegularExpression) {
                    if (regEx.test(passtest)) {
                        this.set("passwordPolicy.policies[" + i + "].isCompliant", true);
                    } else {
                        this.set("passwordPolicy.policies[" + i + "].isCompliant", false);
                        this.set("invalidPass", true);
                    }
                }
            }
        },
        submitPass: function (e) {
            kendo.ui.progress($("#PassChangeDiv"), true);
            isPassValid = false;
            if (FRPassValidator.validate()) {
                pwChangeDS.read();
            } else { kendo.ui.progress($("#PassChangeDiv"), false); }
        }
    });

    var profiledsdata = [
        {
            "preDefinedQuestions": {
                "questions": []
            },
            "customQuestions": {
                "questions": []
            },
            "predefinedOptions": [],
            "preDefinedQuestion": [],
            "customQuestion": [],
            "Mail": {
                "PrimaryEmail": "",
                "RecoveryEmail": "",
                "regEx": "^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$"
                //^[_A-Za-z0-9]+(\.[_A-Za-z0-9]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)
            },
            "xfrMobile": {
                "Mobile": "",
                "regEx": "^[0-9]{10,}$"
            }
        }
    ];

        var profileDS = new kendo.data.DataSource({
            transport: {
                read: {
                    //async: false,
                    url: function () {
                        return window.location.protocol + "//" + window.location.host + "/WebServices/PWResetWS.asmx/GetProfile2";
                    },
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=UTF-8",
                    data: function () {
                        return { sessiondetails: { "sessionId": null, "clientIP": thisClientIP} };
                    }
                },
                parameterMap: function (data, operation) {
                    return kendo.stringify(data);
                }
            },
            schema: {
                errors: function (response) {
                    response = JSON.parse(response.d.Data.Items)
                    if (response.result != "success") {
                        return response.message;
                    }
                    return false;
                },
                data: function (data) {
                    if (data.d != null) {
                        response = JSON.parse(data.d.Data.Items)
                        if (response.result) {
                            if (response.result == "success") {
                                if (response.securityQuestion != null) {
                                    if (response.securityQuestion.questionsSet.length) {
                                        var PreDefQuestionArr = JSON.search(response, '//securityQuestion/questionsSet[not(questionType="customQuestion")]');
                                        var CustomQuestionArr = JSON.search(response, '//securityQuestion/questionsSet[questionType="customQuestion"]');
                                        var PreDefAnswered = JSON.search(PreDefQuestionArr, '//*[isSselected="true"]');
                                        var PreDefQuestionArr = JSON.clone(PreDefQuestionArr);
                                        var CustomQuestionArr = JSON.clone(CustomQuestionArr);
                                        for (var i = 0; i < PreDefQuestionArr.length; i++) {
                                            delete PreDefQuestionArr[i].isSselected
                                            delete PreDefQuestionArr[i].answer
                                            PreDefQuestionArr[i].questionType = "PreDefinedQuestion"
                                        }
                                        PreDefQuestionArr.push({ "question": "Please Select a Question", "questionId": "-1" })
                                        var questionObj = {}
                                        for (var i = 0; i < response.securityQuestion.numberOfQuestionFromListMustSet; i++) {
                                            questionObj = {}
                                            questionObj.questionSet = JSON.clone(PreDefQuestionArr)
                                            questionObj.id = i;
                                            questionObj.selectedValue = { "question": "Please Select a Question", "questionId": "-1" };
                                            profiledsdata[0].preDefinedQuestions.questions.push(JSON.clone(questionObj));
                                        }
                                        if (response.securityQuestion.numberOfCustomQuestionMustSet < 2) {
                                            $("#customQuesHeaderCell").html("Custom Question")
                                        } else {
                                            $("#customQuesHeaderCell").html("Custom Questions")
                                        }
                                        for (var i = 0; i < response.securityQuestion.numberOfCustomQuestionMustSet; i++) {
                                            questionObj = {}
                                            if (i < CustomQuestionArr.length) {
                                                if (CustomQuestionArr[i].isSelected == "true") {
                                                    questionObj = JSON.clone(CustomQuestionArr[i]);
                                                }
                                            } else {
                                                questionObj = {
                                                    "questionId": "",
                                                    "question": "",
                                                    "answer": "",
                                                    "isSelected": "false",
                                                    "customQuestion": "Provide your own",
                                                    "questionType": "customQuestion"
                                                }
                                            }
                                            questionObj.id = i;
                                            profiledsdata[0].customQuestions.questions.push(JSON.clone(questionObj));
                                        }
                                        var j = 0;
                                        for (var i = 0; i < PreDefAnswered.length; i++) {
                                            answeredques = JSON.search(profiledsdata[0].preDefinedQuestions.questions[j], '//questionSet[questionId="' + PreDefAnswered[i].questionId + '"]');
                                            if (answeredques.length > 0) {
                                                answeredques[0].isSselected = "true";
                                                answeredques[0].answer = PreDefAnswered[i].answer;
                                                profiledsdata[0].preDefinedQuestions.questions[j].selectedValue = JSON.clone(answeredques[0]);
                                            }
                                            j++
                                            if (j > response.securityQuestion.numberOfQuestionFromListMustSet.length) { break; }
                                        }
                                    }
                                }
                                if (response.profileAttributes != null) {
                                    var mobileAttr = JSON.search(response.profileAttributes, "//*[fieldId='xfrMobile']")
                                    if (mobileAttr.length) {
                                        if (mobileAttr[0].value) {
                                            var phoneObj = getPhoneDetails(mobileAttr[0].value);
                                            var countryobj = getCountry(phoneObj, JSON.clone(recoveryViewModel.get("countries.countryList")));
                                            recoveryViewModel.set("countries.selectedCountry", countryobj);
                                            profiledsdata[0].xfrMobile.Mobile = phoneObj.basenumber;
                                        }
                                    }
                                    var altMailAttr = JSON.search(response.profileAttributes, "//*[fieldId='xfrAltMail']")
                                    if (altMailAttr.length) {
                                        profiledsdata[0].Mail.RecoveryEmail = altMailAttr[0].value;
                                    }
                                    var altMailAttr = JSON.search(response.profileAttributes, "//*[fieldId='mail']")
                                    if (altMailAttr.length) {
                                        profiledsdata[0].Mail.PrimaryEmail = altMailAttr[0].value;
                                    }
                                }
                            } else {
                                alert("Unknown Webservice error");
                                closewin('Recovery', false);
                            }
                        }
                    }
                    return profiledsdata;
                }
            },
            change: function () {
                recoveryViewModel.set("recoveryItems.preDefinedQuestions", recoveryViewModel.get("profilesource.data()[0].preDefinedQuestions"));
                recoveryViewModel.set("recoveryItems.customQuestions", recoveryViewModel.get("profilesource.data()[0].customQuestions"));
                recoveryViewModel.set("recoveryItems.xfrMobile", recoveryViewModel.get("profilesource.data()[0].xfrMobile"));
                recoveryViewModel.set("recoveryItems.Mail", recoveryViewModel.get("profilesource.data()[0].Mail"));
                kendo.ui.progress($("#RecoveryDiv"), false);
            },
            error: function (e) {
                var errortxt = e.errors;
                if (e.errors == undefined) { errortxt = e.errorThrown; }
                alert("Webservice error: " + errortxt);
                this.cancelChanges();
                closewin('Recovery', false);
            }
        });

    var countriesdsdata = [ { "selectedValue": {}, "countries": [] } ];

    var countriesDS = new kendo.data.DataSource({
        transport: {
            read: {
                //async: false,
                url: function () {
                    return window.location.protocol + "//" + window.location.host + "/webcontent/portal/js/countries.txt";
                },
                dataType: "text"
            }
        },
        schema: {
            data: function (data) {
                countriesdsdata[0] = JSON.parse(data);
                profileDS.fetch()
                return countriesdsdata
            },
            errors: function (response) {
                try {
                    response = $.parseJSON(response);
                    if (!response.countries) {
                        return "Malformed json";
                    }
                } catch (e) {
                    return "Malformed json";
                }
                return false;
            }
        },
        change: function () {
            recoveryViewModel.set("countries", recoveryViewModel.get("countriessource.data()[0].countries"));
        },
        error: function (e) {
            var errortxt = e.errors;
            if (e.errors == undefined) { errortxt = e.errorThrown; }
            alert("json file error: " + errortxt);
            this.cancelChanges();
            closewin('Recovery', false);
        }
    });

    var updatedsdataret = [{}]

    var personalUpdateDS = new kendo.data.DataSource({
        transport: {
            read: {
                //async: false,
                url: function () {
                    return window.location.protocol + "//" + window.location.host + "/WebServices/PWResetWS.asmx/UpdateFRProfile2";
                },
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                data: function () {
                    var mobilenumber = recoveryViewModel.get("countries.selectedCountry.cc") + recoveryViewModel.get("recoveryItems.xfrMobile.Mobile")
                    mobilenumber = mobilenumber.replace(/\D/g, "");
                    var PA = [
                        {
                            "fieldId": "xfrMobile",
                            "value": mobilenumber
                        }, {
                            "fieldId": "xfrAltMail",
                            "value": recoveryViewModel.get("recoveryItems.Mail.RecoveryEmail")
                        }
                    ]
                    return { sessiondetails: { "sessionId": null, "clientIP": thisClientIP }, "profileattributes": PA };
                }
            },
            parameterMap: function (data, operation) {
                return kendo.stringify(data);
            }
        },
        schema: {
            data: function (data) {
                updatedsdataret[0] = JSON.parse(data.d.Data.Items);
                return updatedsdataret;
            },
            errors: function (response) {
                try {
                    response = JSON.parse(response.d.Data.Items)
                    if (response.result != "success") {
                        return data.message;
                    }
                    return false;
                } catch (e) {
                    return "Unknown return format from webservice";
                }
                return false;
            }
        },
        change: function (e) {
            if (this.data().length) {
                if (this.data()[0].result == "success") {
                    kbaDS.read();
                    return;
                }
            }
        },
        error: function (e) {
            var errortxt = e.errors;
            if (e.errors == undefined) { errortxt = e.errorThrown; }
            alert("Webservice error: " + errortxt);
            this.cancelChanges();
            closewin('Recovery', false);
        }
    });

    var kbaDS = new kendo.data.DataSource({
        transport: {
            read: {
                //async: false,
                url: function () {
                    return window.location.protocol + "//" + window.location.host + "/WebServices/PWResetWS.asmx/UpdateKBA2";
                },
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                data: function () {
                    var SQ = []
                    defAnswer = "*****";
                    var secquestion = {};
                    var allPreDefQuestions = recoveryViewModel.get("recoveryItems.preDefinedQuestions.questions");
                    for (var i = 0; i < allPreDefQuestions.length; i++) {
                        secquestion = { "questionId": allPreDefQuestions[i].selectedValue.questionId, "questionType": null, "answer": null }
                        if (allPreDefQuestions[i].selectedValue.answer != defAnswer) {
                            secquestion.answer = allPreDefQuestions[i].selectedValue.answer;
                        }
                        SQ.push(secquestion);
                    }
                    var allCustomQuestions = recoveryViewModel.get("recoveryItems.customQuestions.questions");
                    for (i = 0; i < allCustomQuestions.length; i++) {
                        secquestion = { "questionId": null, "questionType": "customQuestion", "answer": null }
                        if (allCustomQuestions[i].answer != defAnswer) {
                            secquestion.questionId = allCustomQuestions[i].question.replace(' ', '_')
                            secquestion.answer = allCustomQuestions[i].answer;
                        } else {
                            secquestion.questionId = allCustomQuestions[i].question
                        }
                        SQ.push(secquestion);
                    }
                    return { sessiondetails: { "sessionId": null, "clientIP": thisClientIP }, "securityquestions": SQ, "RecoveryComplete":"true" };
                }
            },
            parameterMap: function (data, operation) {
                return kendo.stringify(data);
            }
        },
        schema: {
            data: function (data) {
                updatedsdataret[0] = JSON.parse(data.d.Data.Items);
                return updatedsdataret;
            },
            errors: function (response) {
                response = JSON.parse(response.d.Data.Items)
                if (response.result != "success") {
                    return response.message;
                }
                return false;
            }
        },
        change: function (e) {
            if (this.data().length) {
                if (this.data()[0].result == "success") {
                    alert("Your Recovery options were saved successfully. Thank you for your participation.")
                    kendo.ui.progress($("#RecoveryDiv"), false);
                    closewin('Recovery', false);
                    return;
                }
            }
        },
        error: function (e) {
            var errortxt = e.errors;
            if (e.errors == undefined) { errortxt = e.errorThrown; }
            alert("Webservice error: " + errortxt);
            this.cancelChanges();
            closewin('Recovery', false);
        }
    });

    $("#RecoveryDiv").kendoValidator({
        validateOnBlur: false,
        rules: {
            customRule1: function (input) {
                if (input.is("[id='recEmail']")) {
                    var val = !input.val() ? "" : input.val();
                    isValid = new RegExp(recoveryViewModel.get("recoveryItems.Mail.regEx")).test(val)
                    if (!isValid) { scrollToInvalid(input, "mainScroll") }
                    return isValid;
                }
                return true;
            },
            customRule2: function (input) {
                if (input.is("[id='recEmail']") && isValid) {
                    var val = !input.val() ? "" : input.val();
                    isValid = val.toLowerCase() != recoveryViewModel.get("recoveryItems.Mail.PrimaryEmail").toLowerCase()
                    if (!isValid) { scrollToInvalid(input, "mainScroll") }
                    return isValid;
                }
                return true;
            },
            customRule3: function (input) {
                if (input.is("[id='recPhone']") && isValid) {
                    var val = !input.val() ? "" : input.val();
                    val = val.replace(/\+|\(|\)|-|\s/g, '');
                    isValid = (new RegExp(recoveryViewModel.get("recoveryItems.xfrMobile.regEx")).test(val) && val.replace(/ /gi, "") != "")
                    if (!isValid) { scrollToInvalid(input, "mainScroll") }
                    return isValid;
                }
                return true;
            },
            customRule4: function (input) {
                if (input.is("[id='recPhone']") && isValid) {
                    var val = !input.val() ? "" : input.val();
                    val = recoveryViewModel.get("countries.selectedCountry.cc") + val;
                    val = val.replace(/\+|\(|\)|-|\s/g, '');
                    var phoneObj = getPhoneDetails(val);
                    isValid = phoneObj.isValid;
                    if (!isValid) { scrollToInvalid(input, "mainScroll") }
                    return isValid;
                }
                return true;
            },
            customRule5: function (input) {
                if (input.is("[id|='predefques']") && isValid) {
                    var val = !input.val() ? -1 : input.val();
                    isValid = (val != -1);
                    if (!isValid) { scrollToInvalid($("#" + input.attr("id") + "_div"), "mainScroll") }
                    return isValid;
                }
                return true;
            },
            customRule6: function (input) {
                if (input.is("[id='preDefMarker']") && isValid) {
                    var questions = JSON.clone(recoveryViewModel.get("recoveryItems.preDefinedQuestions.questions"));
                    var dups = JSON.search(questions, "//selectedValue[question = following::selectedValue/question or category = preceding::selectedValue/question]");
                    isValid = (dups.length == 0)
                    if (!isValid) { scrollToInvalid($("#preDefText"), "mainScroll") }
                    return isValid;
                }
                return true;
            },
            customRule7: function (input) {
                if (input.is("[id|='predefanswer'], [id|='customanswer'], [id|='customques']") && isValid) {
                    var val = !input.val() ? "" : input.val();
                    isValid = val.replace(/ /gi, "") != "";
                    if (!isValid) { scrollToInvalid(input, "mainScroll") }
                    return isValid;
                }
                return true;
            }
        },
        messages: {
            customRule1: "Invalid Email format",
            customRule2: "Enter a unique email address",
            customRule3: "Only enter numbers, 10 digits+",
            customRule4: "Invalid mobile number",
            customRule5: "Select a question",
            customRule6: "Duplicate questions selected",
            customRule7: "Cannot be blank"
        }
    });

    var validator = $("#RecoveryDiv").data("kendoValidator");

    var recoveryViewModel = kendo.observable({
        isVisible: false,
        profilesource: profileDS,
        recoveryItems: {
            preDefinedQuestions: {
                questions: []
            },
            customQuestions: {
                questions: []
            },
            xfrMobile: {},
            Mail: {}
        },
        countriessource: countriesDS,
        countries: {
            "selectedCountry": {},
            "countryList": []
        },
        onOpen: function (e) {
            kendo.ui.progress($("#RecoveryDiv"), true);
            countriesDS.fetch()
        },
        onReturn: function (e) {
            if (e.which === 13) {
                this.updateProfile(e);
                return;
            }
        },
        updateProfile: function (e) {
            isValid = false;
            if (validator.validate()) {
                kendo.ui.progress($("#RecoveryDiv"), true);
                personalUpdateDS.read();
            }

        },
        preDefinedBlur: function (e) {
            if ((e.data.selectedValue.isSselected) && e.data.selectedValue.answer == "") {
                this.set("recoveryItems.preDefinedQuestions.questions[" + e.data.id + "].selectedValue.answer", "*****");
            }
        },
        preDefinedFocus: function (e) {
            if ((e.data.selectedValue.isSselected) && e.data.selectedValue.answer == "*****") {
                this.set("recoveryItems.preDefinedQuestions.questions[" + e.data.id + "].selectedValue.answer", "");
            }
        },
        customQuestionChange: function (e) {
            this.set("recoveryItems.customQuestions.questions[" + e.data.id + "].answer", "");
            this.onReturn(e)
        },
        customBlur: function (e) {
            if ((e.data.isSelected) && e.data.answer == "") {
                this.set("recoveryItems.customQuestions.questions[" + e.data.id + "].answer", "*****");
            }
        },
        customFocus: function (e) {
            if ((e.data.isSelected) && e.data.answer == "*****") {
                this.set("recoveryItems.customQuestions.questions[" + e.data.id + "].answer", "");
            }
        }
    });

    function addStyleSheet(url) {
        if (document.createStyleSheet) {
            document.createStyleSheet(url);
        }
        else {
            $('<link rel="stylesheet" type="text/css" href="' + url + '" />').appendTo('head');
        }
    }

    function showFRWin(showPass, showRec) {
        if (showPass) {
            kendo.bind(document.body, passChangeViewModel);
            var html = jQuery('html');
            html.css('overflow', 'hidden');
            $('#PassChangeDiv').parent().find(".k-window-action").css("visibility", "hidden");
            $("#PassChangeDiv").getKendoWindow().center();
            $("#PassChangeDiv").getKendoWindow().open();
            addStyleSheet("../css/kendo.common.min.css")
            addStyleSheet("../css/kendo.default.min.css")
        } else if (showRec) {
            showRecWin(showRec);
        }
    }

    function showRecWin(show) {
        kendo.bind(document.body, recoveryViewModel);
        var html = jQuery('html');
        html.css('overflow', 'hidden');
        $('#RecoveryDiv').parent().find(".k-window-action").css("visibility", "hidden");
        $("#RecoveryDiv").getKendoWindow().center();
        $("#RecoveryDiv").getKendoWindow().open();
        addStyleSheet("../css/kendo.common.min.css")
        addStyleSheet("../css/kendo.default.min.css")
    }

</script>
    </div>

    <div>
       <div class="wrapper container-fluid innerPage">
            <!-- Global Page Client Name Start -->
           
            <!-- Global Page Client Name End -->
            
<!-- Accordion Menu -->


<!-- Primary Nav -->
<div class="accordionSection innerPage_Accordion">
  <div class="toggleKey toggleShow">
  </div>
  <div class="toggleKey toggleHide">
  </div>
  <div class="row">
    <div class="col-sm-12 col-md-12">
      <div class="panel-group" id="accordion">
        <div class="panel panel-default">
          <div class="panel-heading accordionHead">
            <h4 class="panel-title panel-title-home">
            <a  href="/Home/newdefault.aspx" title="Home" >
              <span class="G_menuIcon homeIcon">
              </span>
              <span class="menuName">
              Home
              </span>    
            </a>           
            </h4>
          </div>
        </div>


     
		<div class="panel panel-default">
          <div class="panel-heading accordionHead">
            <h4 class="panel-title panel-title-home">
            <a data-toggle="" data-parent="#accordion" title="Support" href="/BUP/Support.aspx" title="Support">
              <span class="G_menuIcon supportIcon">
              </span>
              <span class="menuName">
              Support
              </span>
            </a>
            </h4>
          </div>
          <div id="collapseFour" class="panel-collapse collapse">
            <div class="panel-body">
              <table class="table">
                <tr>
                  <td>
                    <a href="#">
                      Tickets
                    </a>
                    
                  </td>
                </tr>
                <tr>
                  <td>
                    <a href="#">
                      Topics
                    </a>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a href="#">
                      Notifications
                    </a>
                  </td>
                </tr>
              
                  <td>
                    <a href="#">
                      Lorem
                    </a>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a href="#">
                      Ipusm
                    </a>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>



	  </div>
    </div>
  </div>
  <div class="toggleKey toggleEmpty">
  </div>
  
</div>
<script>
var MP = {
<!--mp_trans_disable_start -->
	Version: '3.1.1.0',
	SrcLang: 'en',
<!--mp_trans_disable_end -->
	UrlLang: 'mp_js_current_lang',
	SrcUrl: decodeURIComponent('mp_js_orgin_url'),
	oSite: decodeURIComponent('mp_js_origin_baseUrl'),
	tSite: decodeURIComponent('mp_js_translated_baseUrl'),
<!--mp_trans_disable_start -->
	init: function() {
		if (MP.oSite.indexOf('p_js_') == 1) {
			MP.SrcUrl = window.top.document.location.href;
			MP.oSite = MP.tSite = window.top.document.location.host;
			MP.UrlLang = MP.SrcLang;
		}
	},
	switchLanguage: function(url,pref,sync) {
		var sync = sync;
		var oSite=MP.oSite.replace('http://','').replace('https://','').replace(/\/?$/, '');
		var tSite=MP.tSite.replace('http://','').replace('https://','').replace(/\/?$/, '');
		url=url.replace('http://','').replace('https://','').replace(/\/?$/, '');
		if(sync && (typeof MpStorage !== 'undefined')&&(typeof MpStorage.updatePref !== 'undefined')){
			if(pref){
			var lang = pref.substring(0, 2);
			pref = lang == MP.UrlLang ? MP.SrcLang+pref.substring(2):pref;
			}
			MpStorage.updatePref(url,pref);
		}
		setTimeout(function() {
			var script = document.createElement('SCRIPT');
			if (url == oSite) {
				script.src = location.protocol + '//' + tSite +'?1023749634;' + encodeURIComponent(location.href);
			} else {
				script.src = location.protocol + '//' + url +'?1023749632;' + encodeURIComponent(MP.SrcUrl);
			}
			var target = document.getElementsByTagName('script')[0];
			target.parentNode.insertBefore(script, target);
		}, 500);
		return false;
	},
	switchToLang: function(url) {
		if(window.top.location.href == url){
			if((typeof MpStorage !== 'undefined')&&(typeof MpStorage.updatePref !== 'undefined'))
			MpStorage.updatePref(MP.oSite,MP.SrcLang);
		}else{
			window.top.location.href = url;
		}
	}
	<!-- mp_trans_disable_end -->   
};

MP.UrlLang='mp_js_current_lang';
MP.SrcUrl=decodeURIComponent('mp_js_orgin_url');
MP.oSite=decodeURIComponent('mp_js_origin_baseUrl');
MP.tSite=decodeURIComponent('mp_js_translated_baseUrl');
MP.init();
window.onload = function() {
    var langlinks = document.querySelectorAll('.langLink');
    for (var i = 0; i < langlinks.length; i++) {
        langlinks.item(i).onclick = function() {
            var lang = this.getAttribute('data-lang');
            var url = this.getAttribute('data-href');
            var tSite = MP.tSite.replace('http://', '').replace('https://', '');
            url = url.replace('http://', '').replace('https://', '');
            MP.switchLanguage(tSite.search(url) != -1 ? MP.oSite : url, lang, true);
            return false;
        }
    }
}
</script>
<!--mp_global_switch_begins-->
<table align="right" width="100%"><tr><td align="right">
<a class="langLink" data-href="http://catalogfr.compucom.com" href="javascript:void(0)" data-lang ="fr" mporgnav="">FranÃ§ais</a>
</td>
<td width="25px">&nbsp;</td>
</tr></table>
<!--mp_global_switch_ends-->

<!-- <script>
$(document).ready(function() {
$("#anchMyApprovalId").attr("href","../Service/MyApprovals.aspx");
});
</script> -->


       

<!-- Accordian Menu -->

             <div class="clientNameSection"><span class="clientName"><span id="ctl00_lblClientCode" title="Adecco">Adecco</span></span></div>

            <!-- Main page Content Start -->
            <div class="mainPageContent ContainerExtend col-xs-12">
                <div class="mainHeader">
                    

<!-- Main page header Start -->
<div class="mainHeader">
    <div class="breadcrumbSection col-md-6 col-xs-5">
      <span id="ctl00_Header_SiteMapPath1"><a href="#ctl00_Header_SiteMapPath1_SkipLink"><img alt="Skip Navigation Links" src="/WebResource.axd?d=5KUsn_kPp-VcwOvDusT61S3O0n-iR2GfdLTX3Yf5xZIm9hTF1fGm-2sd3lBBMMFKxr2_X07KjLUkUSTHv5Q9_Y917M41&amp;t=637100645640000000" width="0" height="0" style="border-width:0px;" /></a><span>
      <a id="ctl00_Header_SiteMapPath1_ctl00_HyperLink1" class="breadcrumbHomeIcon" href="/Home/NewDefault.aspx"></a>
          
          </span><span> &gt; </span><span>Support</span><a id="ctl00_Header_SiteMapPath1_SkipLink"></a></span>
    </div>
    
    
    <div class="headerRight col-md-5  col-xs-5">

    <div id="ctl00_Header_clientlogo" class="ClientLogoSection">
       <div class="ClientLogoSectionInner">
         <img id="ctl00_Header_LogoImage" alt="client Log" src="/webcontent/logos/2090/BUP_account_logo.jpg?time=636512579426642703?time=636596111448577916?time=636596111883046271?time=637278251615703912" style="border-width:0px;" />
       </div> 
   </div>

   <div class="headerUserInfo">
      <span id="ctl00_Header_lblClientName" class="headerClientName">Adecco</span>
        <ul>
           
            
            <li class="profile col-md-6  col-xs-6"><span class="userIcon_img"></span>
                
                <div class="btn-group userNameSection" data-step="1" data-intro="<b>Username/Login </b><br>click here to log in or click on the arrow next to username to sign out or view profile information" data-position='left'>
                    <a data-toggle="dropdown" class="btn dropdown-toggle">
                        <table>
                        <tr>
                        <td>
                        <span id="ctl00_Header_nameLabel1" title="Roberto Espinosa" class="userName">Roberto Espinosa</span>
                        </td>
                        <td style="vertical-align:middle">
                        <span class="caret"></span>
                        </td>
                        </tr>
                        </table>
                    </a>
                    <ul role="menu" class="dropdown-menu">
                         <li>
                           <a href="/Home/Profile.aspx">Profile</a>
         
                        </li>
                        
                         <li>
                           <a href="/home/AccountSearch.aspx">Change Account</a>
         
                        </li>
                        
                        <li>
                             <a onclick="return confirm(&#39;Are you sure you want to log out?&#39;);" id="ctl00_Header__signOutButton" href="javascript:__doPostBack(&#39;ctl00$Header$_signOutButton&#39;,&#39;&#39;)">Log Out</a>
                         </li>  
                         
                         
                    </ul>
                </div>                
            </li>
            
        </ul>
        </div>
    </div>
   
</div>
<input type="hidden" id="hiddenEmail" value='Roberto.Espinosa@compucom.com' />
<input type="hidden" id="hiddenFirstName" value='Roberto' />
<input type="hidden" id="hiddenLastName" value='Espinosa' />
<input type="hidden" id="hiddenClientCode" value='Adecco' />
<input type="hidden" id="hiddenSourceHomeUrl" value='http://sourceqc.compucom.com' />
<input type="hidden" id="customer_email" name="customer_email" value='Roberto.Espinosa@compucom.com' />
<input type="hidden" id="customer_name" name="customer_name" value='Roberto Espinosa' />
<input type="hidden" id="hiddentUserNumber" value='612661'/>
<input type="hidden" id="hiddenWorkingClientID" value='2090'/>
<input type="hidden" id="hiddenWorkingClientName" value='Adecco'/>
<input type="hidden" id="hiddenSessionToken" value='a6c87e33-1daf-4626-b9a7-cf89ddf6ece0'/>
<input type="hidden" id="hiddenBrowserName" value='Chrome'/>



<!-- Main page header End -->

                    <div style="padding-top: 17px; padding-right: 17px">
                        
                    </div>

                </div>
                <!-- Content Begin -->
                <div class="GlobalSection">
                

    <div id="mobile_redirect" style="display: none; margin: 0px; border: 0px; padding: 0px ;margin-left:0px;" >
        
      
     <input name="ctl00$ContentPlaceHolder1$hiddenUserID" type="hidden" id="ctl00_ContentPlaceHolder1_hiddenUserID" />
    </div>

    

<script type="text/javascript">
        $(function () {
            //$("#BreadCrumb")[0].innerHTML="Support";
            $("#LocSearchType").kendoDropDownList();
            var today = new Date();
            var AMonthAgo = new Date(today.setDate(today.getDate() -30));
            var baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/IncidentWS.asmx/";
            $("#MyRequests").kendoGrid({
                dataSource: {
                    type: "json",
                    serverPaging: true,
                    serverSorting: true,
                    serverFiltering: true,
                    allowUnsort: true,
                    sort: { field: "incident_state", dir: "asc" },
                    filter: [{ field: "incident_state", operator: "NOT IN", value: "6, 7", logic: "OR" },
{ field: "LASTMODIFIEDDATE", operator: "gte", value:  AMonthAgo.getFullYear() + "-" + (AMonthAgo.getMonth() + 1) + "-" + AMonthAgo.getDate() + " 23:59:59"},
                    { field: "closed_at", operator: ">", value: AMonthAgo.getFullYear() + "-" + (AMonthAgo.getMonth() + 1) + "-" + AMonthAgo.getDate() + " 23:59:59"}],
                    pageSize: 5,
                    transport: {
                        read: {
                            url: baseURL + "getIncidents",
                            dataType: "json",
                            type: "POST",
                            contentType: "application/json; charset=utf-8",
                            data: {clarifySearchDto:clarifySearchDto}
                        },
                        parameterMap: function (data, operation) {
                            return kendo.stringify(data);
                        }
                    },
                    schema: {
                        data: function (data) {
                            if (data.d != null && data.d.Data != null)
                                return data.d.Data.Items;
                        },
                        total: function (data) {
                            if (data.d != null && data.d.Data != null)
                                return data.d.Data.TotalCount;
                        }

                    }
                },
                pageable: true,
                editable: false,
                columns: [{ title: "<span style='font-size:17px'>Current Incidents</span>"}],
                rowTemplate: kendo.template($("#IncidentTemplate").html()),
                altRowTemplate: kendo.template($("#IncidentTemplateAlt").html())
            });
            $("#NewRequest").kendoWindow({
                title: "Open New Incident",
                modal: true,
                visible: false,
                resizable: false,
                draggable: false,
                width: 610,
                height: 512
            });
            $("#ShowDetails").kendoWindow({
                title: "Details",
                modal: true,
                visible: false,
                resizable: false,
                draggable: false,
                width: 610,
                height:500
            });
            $("#ShowPhoneNumbers").kendoWindow({
                title: "Contact Numbers",
                modal: true,
                visible: false,
                resizable: false,
                draggable: false,
                width: 550,
                height: 185
            });
            $('#ShowPhoneNumbers').parent().find('.k-window-titlebar,.k-window-actions').css('backgroundColor', '#6AADA9');
            $('#ShowPhoneNumbers').parent().find('.k-window-titlebar,.k-window-actions').css('color', 'white');
            $('#ShowPhoneNumbers').parent().find('.k-window-titlebar,.k-window-actions').css('text-align', 'center');
            $('#ShowPhoneNumbers').parent().find('.k-window-titlebar,.k-window-actions').css('font-size', 'xx-large');
            $('#NewRequest').parent().find('.k-window-titlebar,.k-window-actions').css('backgroundColor', '#0A5564');
            $('#NewRequest').parent().find('.k-window-titlebar,.k-window-actions').css('color', 'white');
            $('#ShowDetails').parent().find('.k-window-titlebar,.k-window-actions').css('backgroundColor', '#0A5564');
            $('#ShowDetails').parent().find('.k-window-titlebar,.k-window-actions').css('color', 'white');

            getUpdates();
        })

        // ******* IMPORTANT ProcessServerResponse is the function called by the server callback, DO NOT CHANGE THE NAME 
        // OR DELETE IT unless it is changed on the code behind too.
        function ProcessServerResponse(args) {
            var argumentos = args.split("|");
            switch (argumentos[0]) {
                case "A": //Incidents details
                    $("#txtNumber")[0].value = argumentos[1];
                    $("#txtNumberLabel")[0].innerHTML = argumentos[1];
                    $("#txtState")[0].value = argumentos[2];
                    $("#txtShortDescription")[0].value = argumentos[3];
                    $("#txtDetDescription")[0].value = argumentos[4];
                    var incidentSys_ID = argumentos[5];
   $("#txtCaller2")[0].value = argumentos[6];                  var COMPANY = argumentos[7];
                    $('#LoadingDetails')[0].style.display = 'none';

                    baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/SNSysJournalFieldWS.asmx/";
                    FillGridWithRowTemplatesLoc("tblAdditionalComments",
                    { field: "sys_created_on", dir: "desc" },
                    [
                        { field: "element_id", value: incidentSys_ID, operator: "=", logic: "" },
                        { field: "element", value: "comments", operator: "=", logic: "" },
                    ],
                    baseURL, "getSysJournalField",
                    [{ sys_created_by: { type: "string"} }, { sys_created_on: { type: "date"} }, { value: { type: "string"}}],
                    [{ title: "Additional Comments"}],
                    "AdditionalCommentsRowTemplate", "AdditionalCommentsAltRowTemplate"
                );
                    break;
                case "B": //Updates
                    for (var i = 1; i < argumentos.length - 1; i++) {
                        if (argumentos[i] != "") {
                            var article = argumentos[i].split("#@#");
                           // $("#Title" + i)[0].innerHTML = article[0];
                            //$("#Date" + i)[0].innerHTML = article[1];
                            $("#Update" + i)[0].innerHTML = article[2];
                        }
                    }
                    break;
                case "C": //Insert new incident
                    if (argumentos[1] == "ERROR") {
                        $("#lblNewIncNumber")[0].textContent = "We found an error with your request, please try again";
                        $("#cmdNewIncident")[0].disabled = false;
                    }
                    else {
                        uploadCommit(argumentos[2])
                        $("#lblNewIncNumber")[0].textContent = "Incident " + argumentos[1] + " created";
                        $("#cmdNewIncident")[0].style.display = "none";
                        $("#cmdClose")[0].style.display = "";
                    }
                default:

            }
        } // ************************ END ProcessServerResponse **********************************************
</script>
<script type="text/javascript">
 <!-- eGain Popup -->

var debug = true;
        window._bcvma = window._bcvma || [];
        _bcvma.push(["setAccountID", "738773763303706931"]);
        _bcvma.push(["setParameter", "WebsiteID", "733473262144165294"]);
        
        _bcvma.push(["addFloat", {
            type: "chat",
            id: "733473260852938143"
        }]);
        _bcvma.push(["pageViewed"]);
        var bcLoad = function () {
            if (window.bcLoaded) return;
            window.bcLoaded = true;
            var vms = document.createElement("script");
            vms.type = "text/javascript";
            vms.async = true;
            vms.src = ('https:' == document.location.protocol ? 'https://' : 'http://') +
                "vmss.boldchat.com/aid/738773763303706931/bc.vms4/vms.js";
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(vms, s);
        };
        if (window.pageViewer && pageViewer.load) pageViewer.load();
        else if (document.readyState == "complete") bcLoad();
        else if (window.addEventListener) window.addEventListener('load', bcLoad, false);
        else window.attachEvent('onload', bcLoad);
    


/*function displayeGainWindow() {

var LogDetail="";
try
{
      var fname = document.getElementById('hiddenFirstName').value ;
      var lname= document.getElementById('hiddenLastName').value ;
      var email = document.getElementById('hiddenEmail').value;
      
    var urlTarget = "https://egain.compucom.com/system/templates/chat/AdeccoSN/chat.html?subActivity=Chat&entryPointId=1109&templateName=AdeccoSN&languageCode=en&countryCode=US&ver=v11&fieldname_1=Adecco&fieldname_2="+fname+"&fieldname_3="+lname+" &fieldname_4="+email+"&fieldname_6="+email+"&fieldname_7=Adecco&fieldname_8=SN Chat English Test";
    
	window.open(urlTarget, "_blank", "toolbar=no, menubar=no");
}

 catch(err) 
{
           LogDetail= err.meesage.replace(/[&\/\\#, +()$~%.'":*?<>{}]/g, '_');
}
finally
{
 var Url = window.location +"/Chat";
 TrackingDetails(LogDetail, Url);
}
}*/

function displayeGainWindowSpanish() {
var LogDetail="";
try
{
      var fname = document.getElementById('hiddenFirstName').value ;
      var lname= document.getElementById('hiddenLastName').value ;
      var email = document.getElementById('hiddenEmail').value;
      
    var urlTarget = "https://egain.compucom.com/system/templates/chat/AdeccoSN/chat.html?subActivity=Chat&entryPointId=1110&templateName=AdeccoSN&languageCode=es&countryCode=ES&ver=v11&fieldname_1=Adecco&fieldname_2="+fname+"&fieldname_3="+lname+" &fieldname_4="+email+"&fieldname_6="+email+"&fieldname_7=Adecco&fieldname_8=SN Chat Spanish Test";

    window.open(urlTarget, "_blank", "toolbar=no, menubar=no");
}
 catch(err) 
{
           LogDetail= err.meesage.replace(/[&\/\\#, +()$~%.'":*?<>{}]/g, '_');
}
finally
{
 var Url = window.location +"/ChatSpanish";
 TrackingDetails(LogDetail, Url);
}
}

function displayeGainWindowFrench() {
var LogDetail="";
try
{

      var fname = document.getElementById('hiddenFirstName').value ;
      var lname= document.getElementById('hiddenLastName').value ;
      var email = document.getElementById('hiddenEmail').value;
      
	var urlTarget = "https://egain.compucom.com/system/templates/chat/AdeccoSN/chat.html?subActivity=Chat&entryPointId=1111&templateName=AdeccoSN&languageCode=fr&countryCode=CA&ver=v11&fieldname_1=Adecco&fieldname_2="+fname+"&fieldname_3="+lname+" &fieldname_4="+email+"&fieldname_6="+email+"&fieldname_7=Adecco&fieldname_8=SN Chat French Test";
	
    window.open(urlTarget, "_blank", "toolbar=no, menubar=no");
}
 catch(err) 
{
           LogDetail= err.meesage.replace(/[&\/\\#, +()$~%.'":*?<>{}]/g, '_');
}
finally
{
 var Url = window.location +"/ChatFrench";
 TrackingDetails(LogDetail, Url);
}
}
function displayeGainWindowPortuguese() {
var LogDetail="";
try
{

      var fname = document.getElementById('hiddenFirstName').value ;
      var lname= document.getElementById('hiddenLastName').value ;
      var email = document.getElementById('hiddenEmail').value;
      
	var urlTarget = "https://egain.compucom.com/system/templates/chat/AdeccoSN/chat.html?subActivity=Chat&entryPointId=1206&templateName=AdeccoSN&languageCode=pt&countryCode=BR&ver=v11&fieldname_1=Adecco&fieldname_2="+fname+"&fieldname_3="+lname+" &fieldname_4="+email+"&fieldname_6="+email+"&fieldname_7=Adecco&fieldname_8=Portal Chat with Service Desk";
	
    window.open(urlTarget, "_blank", "toolbar=no, menubar=no");
}
 catch(err) 
{
           LogDetail= err.meesage.replace(/[&\/\\#, +()$~%.'":*?<>{}]/g, '_');
}
finally
{
 var Url = window.location +"/ChatPortuguese";
 TrackingDetails(LogDetail, Url);
}
}

function numbersDialog(){
openKendoWindow('ShowPhoneNumbers');
}
</script>
<script type="text/javascript">



function openChatBot() 
{
  
var chatFloatButton = document.body.querySelector('div.bcFloat div a img');

if (chatFloatButton) 
{
    chatFloatButton.click();

 } else 
	{
    setTimeout(function () {

       openChatBot ();

      }, 100);

   }
}

function displayeGainWindow() 
{
 
var LogDetail="";

try
{
  openChatBot();
 
}
catch(err) 
 {
           LogDetail= err.meesage.replace(/[&\/\\#, +()$~%.'":*?<>{}]/g, '_');
 }
finally
{
   var Url = window.location +"/Chat";
   TrackingDetails(LogDetail, Url);
 }
}

<!-- Page Redirect start-->
function PageRedirect(linkname)
{
var Url = window.location +"/" + linkname;
TrackingDetails("", Url);
}

<!-- Page Redirect End -->

<!-- eGain OneTag -->

   var EG_ACT_ID = "EG63041650";

   (function(d) {
      var
      eg = d.createElement("script"),
      s = d.getElementsByTagName("script")[0];
      eg.type = "text/javascript";
      eg.async = true;
      eg.src = "//analytics.analytics-egain.com/onetag/" + EG_ACT_ID;
      s.parentNode.insertBefore(eg, s);
   })(document);
</script>



    <div class="Compucom-content-area">
        

<script src="../js/angular.min.js" type="text/javascript"></script>

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

<style>
   .button-open
    {
        background-image: linear-gradient(rgb(102, 166, 9) 0%, rgb(93, 152, 8) 100%);
        border-top-color: #628a2a;
        border-left-color: rgb(98, 138, 42);
        border-right-color: rgb(98, 138, 42);
        border-bottom-color: rgb(98, 138, 42);    
    }

    .button-completed {
  /* Dark Gray */
  border-color: #555555;
  background: #737373;
  /* Old browsers */
  background: -moz-linear-gradient(top, #737373 0%, #646464 100%);
  /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #737373), color-stop(100%, #646464));
  /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top, #737373 0%, #646464 100%);
  /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top, #737373 0%, #646464 100%);
  /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #737373 0%, #646464 100%);
  /* IE10+ */
  background: linear-gradient(to bottom, #737373 0%, #646464 100%);
  /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#737373', endColorstr='#646464',GradientType=0 );
  /* IE6-9 */ }
</style>
<style>
.featureLink1 {
    position: relative;
    display: inline-block;
    }

.featureLink1 .tooltiptext {
    visibility: hidden;
    width: 120px;
   background-color: #428bca;
    color: #fff;
    text-align: center;
    border-radius: 6px;
    padding: 5px 0;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    margin-left: -60px;
    opacity: 0;
    transition: opacity 1s;
}

.featureLink1 .tooltiptext::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: #555 transparent transparent transparent;
}

.featureLink1:hover .tooltiptext {
    visibility: visible;
    opacity: 1;
}
</style>

<div class="removelater">
    <div class="pagetitleSection">
        <div class="pagetitle">Services & Support </div>
        <div>
            <div class="pageTitleGreenbar" style="margin-top:-1px"></div>
            <!--<input id="txtSearch" type="text" class="searchbox" placeholder="Search Catalog" />-->
        </div>
<!-- End of Header -->

<!-- Start Client Content -->

 <style type="text/css">
        html, body
        {
            margin: 0px;
            padding: 0px;
            border: 0px;
        }
        #container
        {
            width: 98%; /* 870px */
            margin: 0 0 10px 20px; /* top right bottom left */
            padding: 0;
            padding-bottom:3px;
            background-color: #fff;
        }
        #container h1
        {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 150px;
            float: left;
            border-bottom: #c00 solid 3px;
        }
        #container #col1
        {
            width: 26%;
            float: left;
        }
        #container #col2outer
        {
            width: 73%;
            float: right;
            margin: 0;
            padding: 0;
        }
        #col2outer #col2mid
        {
            width: 68%;
            float: left;
        }
        #col2outer #col2side
        {
            width: 31%;
            float: right;
        }
        #container #footer
        {
            float: left;
            width: 100%;
            border-top: #c00 solid 3px;
        }
		#idShowlist
		{
			color: darkblue;
			text-decoration: underline;
		}
		 #showMoreList
            {
                color: darkblue;
                text-decoration: underline;
            }
        .sectionHeading
        {
            color:rgb(107, 174, 173); /* Standard ClientLink Text Color #3C6C73 */
            font-family:"OpenSans-Regular", "Open Sans", "Helvetica Neue",Helvetica,Arial,sans-serif !important;
            font-size: 15pt;
            font-weight:bold;
        }
        .subHeading
        {
            color:rgb(107, 174, 173); /* Standard ClientLink Text Color */
            font-family:"OpenSans-Regular", "Open Sans", "Helvetica Neue",Helvetica,Arial,sans-serif !important;
            font-size: 11pt;
            text-decoration:none;
            font-weight:bold;
        }
        .featureLink
        {
            color:Gray;
            font-family:"OpenSans-Regular", "Open Sans", "Helvetica Neue",Helvetica,Arial,sans-serif !important;
            font-size: 11pt;
            text-decoration:none;
        }
        .resourceTable
        {
            width:90%;
        }
        .sections
        {
            border-top: #bdbdbd solid 1px;
            border-right: #bdbdbd solid 1px;
            border-left: #bdbdbd solid 1px;
            border-bottom:#bdbdbd solid 1px;
            padding-left: 10px;
            margin-top:5px;
        }
        .featureImg
        {
            width:30px;
            height:30px;
        }
        .hrLine
        {
            color:#3C6C73;
            width:98%;
            height:3px;
        }
        .activeTask tr.k-alt
       {
           background-color: white;
       }
       .activeTask tr
       {
           background-color: white;
       }
       .activeTask td:nth-child(2)
       {
           text-align: right;
       }
       .activeTask td
       {
           border: 0;     
       }
       .activeTask .k-grid-header
       {
           display: none;
       }
       .kbTopics table
       {
           width:1600px;
       }
       .kbTopics td
       {
           width:25%;
           padding:5px 5px 5px 0px;
       }
       .top10
       {
           font-size:10pt;
           list-style-type:disc;
           padding-left:20px;
       }
       .serviceAlerts
       {
           font-size:11pt;
           font-weight:bold;
       }
       .alert 
       {
           width:98%;    
       }
    </style>

    <script type="text/javascript">
        var topsolution = [];
        var topsearchresults = [];
        var filteredsearchresult = [];
        var servicealertdata = [];
        $(document).ready(function () {
            try {
                if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                    //do nothing;
                } else {
                    //$("html").css("min-width", "1900px");
                    //$("html").css("overflow", "auto");
                }
            } catch (e) {
            }
            $('#inputSearchTerm').keypress(function (e) {
                if (e.which == 13) {
                    getTopSearchResults();
                    return false;    //<---- Add this line
                }
            });
            var baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/CommonSNWS.asmx/";
            $('#GetMyActiveTasks').html('<img src="../webcontent/portal/images/loading50.gif" id="loading1">');
            
               
            $('#top10List').html('<img src="../webcontent/portal/images/loading50.gif" id="loading3">');
            $('#alertScroll').html('<img src="../webcontent/portal/images/loading50.gif" id="loading4">');

            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: baseURL + "GetMyActiveTasks",
                success: function (data) {
                //Convert string data to JSON Object     
            
                     var json = jQuery.parseJSON(data.d);
                      $('#loading1').hide();
					
                  //Begin Grid
                    $("#GetMyActiveTasks").kendoGrid({
                        dataSource: new kendo.data.DataSource({
                            data: json.records,
                            pageSize: 5
                        }),
                        noRecords: true,
                        sortable: {
                            mode: "multiple",
                            allowUnsort: false
                        },
                        srollable: true,
                        pageable: true,
                        messages: {
                            noRecords: "<b>There is no data on current page</b>"
                        },
                        columns: [{
                            field: "short_description",
                            title: "Short Description",
                            template: '<span class=\"featureLink\" style=\"font-size:9pt\">#=short_description#</span>',
                            attributes: { style: "width: 70%" }
                        },
                            {
                                field: "number",
                                title: "",
                                template: '<span style="text-align:right"><button type="button" id=#=number# class="btn btn-primary btn-sm" style="width:60px" onClick="openDetailWindow(this.id)" >Open</button></span>'
                            }]
                    }); //End Grid

                },
                error: function (request, status, error) {
                    alert("Error!!!");
                }
            }); // End ajax


           
            //******************************************************//
            getServiceAlertdetail();

            // End ajax
            //showToprecords();

        });

        function getServiceAlertdetail() {
            var baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/CommonSNWS.asmx/";
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: baseURL + "GetServiceAlerts",
                success: function (data) {
                    //Convert string data to JSON Object
                    var json = jQuery.parseJSON(data.d);
                    $('#loading4').hide();

                    displayServiceAlerts(json);
                },
                complete: function () {
                    // Schedule the next request when the current one's complete
                    setTimeout(getServiceAlertdetail, 300000);
                },
                error: function (request, status, error) {
                    alert("Error!!!");
                }
            });
        }

        function getTopSearchResults() {

            //*******************************************************//
            var baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/CommonSNWS.asmx/";
            $('#loadtopsearch').html('<img src="../webcontent/portal/images/loading50.gif" id="loading2">');
            $("#KArticles").show();
            $("#loadtopsearch").show();
            $("#topsearchresults").hide();
            $("#ErrorsearchResult").hide();
            var message = {
                searchString: $("#inputSearchTerm").val()
            };

            var input = JSON.stringify(message);

            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: baseURL + "GetTopSearchResults",
                data: input,
                success: function (data) {
                    //Convert string data to JSON Object
                    try {
//debugger;
                        var json = jQuery.parseJSON(data.d);
                        topsearchresults = json;
                        filteredsearchresult = json.slice(0, 10);
                        displaytopresults(filteredsearchresult)
                        if (topsearchresults.length > 10) {
                            $("#showMoreList").text("More...");
                        }
                        else {
                            $("#showMoreList").text("");
                        }
                    }
                    catch (err) {
                        $("#KArticles").show();
                        $("#loadtopsearch").hide();
                        $("#topsearchresults").hide();
                        $("#ErrorsearchResult").show();
                        $('#ErrorsearchResult').html('<span> Unable to process your request please try again later. </span>');
                    }
                },
                error: function (request, status, error) {
                    $("#KArticles").show();
                    $("#loadtopsearch").hide();
                    $("#topsearchresults").hide();
                    $("#ErrorsearchResult").show();
                    $('#ErrorsearchResult').html('<span> Unable to process your request. </span>');

                }
            });      // End ajax


        }
        function displaytopresults(data) {

            if (data.lenght != 0 && data[0].score != 0) {
                $("#KArticles").show();
                $("#loadtopsearch").hide();
                $("#topsearchresults").show();
                $("#ErrorsearchResult").hide();
                $("#topsearchList").kendoListView({
                    dataSource: new kendo.data.DataSource({
                        data: data
                    }),
                   template: '<li><a href=\"KSADetails.aspx?NumVal=#:numberVal#\" class=\"featureLink\" target=\"_blank\">#=shortDesc# </a></li>'


               
                });
            }
            else {
                $("#KArticles").show();
                $("#loadtopsearch").hide();
                $("#topsearchresults").hide();
                $("#ErrorsearchResult").show();
                <!--$('#ErrorsearchResult').html('<span> No results found. </span>');-->
                $('#ErrorsearchResult').html('<span> No results found. Please send an email to <a href="mailto:eKnowledge@compucom.com">eKnowledge@compucom.com</a> to request a new article. </span>');

            }
        }
        function showTopsearchrecords() {

            if ($("#showMoreList").text() == "More...") {
                displaytopresults(topsearchresults);
                $("#showMoreList").text("Less...");
            }
            else if ($("#showMoreList").text() == "Less...") {
                displaytopresults(filteredsearchresult);
                $("#showMoreList").text("More...");
            }




        }

        function showToprecords() {
            var baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/CommonSNWS.asmx/";

            if (topsolution.length == 0) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: baseURL + "GetTop10SolutionsNew",
                    success: function (data) {
                        //Convert string data to JSON Object
                        var json = jQuery.parseJSON(data.d);
                        $('#loading3').hide();
                        topsolution = json;
                        Displaydata(topsolution);
                    },
                    error: function (request, status, error) {
                        //$("#KArticles").show();
                        //$("#loadtopsearch").hide();
                        //$("#topsearchresults").hide();
                        $("#ErrorsearchResult").show();
                        $('#ErrorsearchResult').html('<span>No solutions found.</span>');
                    }
                }); // End ajax
            }
            else {
                Displaydata(topsolution);
            }
        }

        function showd(d) {
            for (var i = 0; i < topsolution.length; i++) {
                if (topsolution[i]["question"] == d) {
                    $("#hidDialog").html(topsolution[i]["answer"]);
                    $("#idTopSolution").kendoWindow({ width: "800px", height: "auto", modal: true });
                    $("#idTopSolution").data("kendoWindow").content(hidDialog.innerHTML);
                    $("#idTopSolution").data("kendoWindow").title(d);
                    $("#idTopSolution").data("kendoWindow").center();
                    $("#idTopSolution").data("kendoWindow").open();
                    return;
                }

            }
        }

        function displayServiceAlerts(json) {
            var cnt = Object.keys(json.records).length;
            //var finalValue[];
            for (var i = 0; i <= cnt; i++) {
                //$("#alertScroll").append("<p class=featureLink>" + json.records[i].short_description + "</p>");
                //$("#alertScroll").append("<div class=\"alert alert-warning\"><i class=\"material-icons\">warning</i>&nbsp;" + //json.records[i].short_description + "</div>");
            }

            var finalValue = [];
            for (var i = 0; i < cnt; i++) {
                finalValue.push(json.records[i]);
            }
            servicealertdata = finalValue;
            $("#alertScroll").kendoListView({
                dataSource: new kendo.data.DataSource({
                    data: finalValue
                }),
                template: '<a href=\"javascript:void(0)\" onClick=\"showalertpopup(\'#=short_description#\');\"><div class=\"alert alert-warning\"><i class=\"material-icons\">warning</i>&nbsp; #=short_description# </div></a>'
            });

        }

        function showalertpopup(d) {
            for (var i = 0; i < servicealertdata.length; i++) {
                if (servicealertdata[i]["short_description"] == d) {
                    $("#hidServicealert").html("<b><u>Alert Detail</u></b>");
                    $("#hidServicealert").append(servicealertdata[i]["text"]);
                    $("#hidServicealert").append("<u><p><b>KB Number</b></p></u>");
                    $("#hidServicealert").append(servicealertdata[i]["number"]);

                    $("#idServiceAlerts").kendoWindow({ width: "800px", height: "auto", modal: true });
                    $("#idServiceAlerts").data("kendoWindow").content(hidServicealert.innerHTML);
                    $("#idServiceAlerts").data("kendoWindow").title(d);
                    $("#idServiceAlerts").data("kendoWindow").center();
                    $("#idServiceAlerts").data("kendoWindow").open();
                    return;
                }

            }
        }


        function Displaydata(topData) {

            var totalCount = topData.length;
            var count = 0;

            if ($("#idShowlist").text() == "Click for more") {
                if (totalCount >= 10) {
                    count = 10;
                }
                else {
                    count = totalCount;
                }
            }
            else if ($("#idShowlist").text() == "Click for less" || $("#idShowlist").text() == "") {
                if (totalCount >= 5) {
                    count = 5;
                }
                else {
                    count = totalCount;
                }
            }

            var finalValue = [];
            for (var i = 0; i < count; i++) {
                finalValue.push(topData[i]);
            }
            $("#top10List").kendoListView({
                dataSource: new kendo.data.DataSource({
                    data: finalValue
                }),
                template: '<li><a href=\"javascript:void(0)\" onClick=\"showd(\'#=question#\');\">#=question#</a></li>'
            });
            if ($("#idShowlist").text() == "Click for more") {
                $("#idShowlist").text("Click for less");
            }
            else if ($("#idShowlist").text() == "Click for less" || $("#idShowlist").text() == "") {

                if (totalCount > 5) {
                    $("#idShowlist").text("Click for more");
                }
                else {
                    $("#idShowlist").hide();
                }
            }
        }
</script>
    <br />
    <div id="container">
        <!--<h1>My Header Row</h1>-->

        <div id="col1">
           <div id="tools" class="sections">
                <p class="sectionHeading">Tools</p>
                <p><span class="subHeading">Service Desk</span>
                <table>
					<tr>
					<img src="../webcontent/portal/images/Chat_dark.png" alt="Chat" class="featureImg" />
					<span class="featureLink">&nbsp;<a href="javascript:void(0)" alt="Chat" onclick="#" class="featureLink1">Chat </a></span>
					<td class="featureLink1">&nbsp;&nbsp;<a href="javascript:void(0)" onclick="displayeGainWindow();" style="text-decoration:none">English<span class="tooltiptext">Click to chat with service desk.</span></a>&nbsp;&nbsp;|&nbsp;&nbsp;</td> 
					<td class="featureLink1">&nbsp;&nbsp;<a href="javascript:void(0)" onclick="displayeGainWindowSpanish()" style="text-decoration:none">Spanish<span class="tooltiptext">Click to chat with service desk.</span></a>&nbsp;&nbsp;|&nbsp;&nbsp;</td>
					<td class="featureLink1">&nbsp;&nbsp;<a href="javascript:void(0)" onclick="displayeGainWindowFrench()" style="text-decoration:none">French<span class="tooltiptext">Click to chat with service desk.</span></a>&nbsp;&nbsp;|&nbsp;&nbsp;</td>
					<td class="featureLink1">&nbsp;&nbsp;<a href="javascript:void(0)" onclick="displayeGainWindowPortuguese()" style="text-decoration:none">Portuguese<span class="tooltiptext">Click to chat with service desk.</span></a>&nbsp;&nbsp;</td>
					</tr>
  				</table>				
				</p>
                <p>
				<span class="subHeading">Self Ticketing</span>
                <br /><img src="../webcontent/portal/images/Self_Ticketing_dark.png" alt="Self-Ticketing" class="featureImg" />
				<span class="featureLink">&nbsp;<a href="javascript:void(0)" alt="Create Incident" onclick="newIncident()" class="featureLink1">Create New Incident <span class="tooltiptext">Click to open new incident.</span></a></span></p>
            </div>
            <div id="empResources" class="sections">
                <p class="sectionHeading">Employee Resources</p>
                <table class="resourceTable">
					<tr><td width="100%"><span><b>You must be connected to the Adecco Network to utilize the links below</b></span></td></tr>
					<tr>
                        <td colspan="1"></br></td>
                    </tr>				
					<tr>
						<td width="100%"><a href="https://passwordreset.adeccona.com" class="featureLink" target="_blank" onclick="PageRedirect('PasswordRest');"><img src="../webcontent/portal/images/Adecco/Password-1-icon.png" alt="featureLink" class="featureImg" width="50" height="50"/>&nbsp;&nbsp;Password Reset Self Service</a></td>
					</tr>
					<tr>
					<td width="100%"><a href="https://changepassword.adecco.net" class="featureLink" target="_blank" onclick="PageRedirect('PasswordChange');"><img src="../webcontent/portal/images/Adecco/Password-1-icon.png" alt="featureLink" class="featureImg" width="50" height="50"/>&nbsp;&nbsp;Change Password</a></td>
					</tr>
					<tr>
						<td width="100%"><a href="https://connect.adeccona.com/Pages/home.aspx" class="featureLink" target="_blank" onclick="PageRedirect('WebConnect');;"><img src="../webcontent/portal/images/Adecco/connect.jpg" alt="featureLink" class="featureImg" width="50" height="50"/>&nbsp;&nbsp;Connect</a></td>
					</tr>
					<tr>
					<td width="100%"><a href="http://epurchase/Pages/Home.aspx" class="featureLink" target="_blank" onclick="PageRedirect('HardwareAsset');"><img src="../webcontent/portal/images/Adecco/Portable-Computer-icon.png" alt="featureLink" class="featureImg" width="50" height="50"/>  &nbsp;&nbsp;Hardware Asset Depot Requests</a></td>				
					</tr>
					<tr></tr>
					<tr>
						<td width="100%"><a href="https://adecco.service-now.com/nav_to.do?uri=%2Fcatalog_home.do%3Fsysparm_view%3Dcatalog_default" class="featureLink" target="_blank" onclick="PageRedirect('TelephoneReqst');">
							<div style="float:left;"><img src="../webcontent/portal/images/Call_dark.png" alt="featureLink" class="featureImg" width="50" height="50"/></div>
							<div>&nbsp;&nbsp;Telephony Requests(IP Call Detail Phone</div>
							<div>&nbsp;&nbsp;report and Voice Mail Password Reset)</div>
						</a></td>
			
					</tr>
					<tr></tr>
					<tr>
						<td width="100%"><a href="https://adecco.service-now.com/nav_to.do?uri=%2Fcatalog_home.do%3Fsysparm_view%3Dcatalog_default" class="featureLink" target="_blank" onclick="PageRedirect('ServiceDispatch');"><div style="float:left;"><img src="../webcontent/portal/images/Chat_dark.png" alt="featureLink" class="featureImg" width="50" height="50"/></div> <div> &nbsp;&nbsp; End User Services(Disposal/Dispatch)</div>
						<div> &nbsp;&nbsp;Requests</div></a></td>				
					</tr>
					<tr></tr>
					<tr>
						<td width="100%">
						<a href="mailto:branchoffice@adeccona.com" class="featureLink" onclick="PageRedirect('SoftwareReqst');">
							<div style="float:left;"><img src="../webcontent/portal/images/Adecco/software-icon.png" alt="featureLink" class="featureImg" width="50" height="50"/></div>
							<div>&nbsp;&nbsp;Software Request (Adobe, Visio, Project or </div>
							<div>&nbsp;&nbsp;non-standard software)</div>
						</a></td>
					</tr>
					<tr>
						<td width="100%"><a href="http://connect/functions/IM/Pages/NewRequestOptions.aspx" class="featureLink" target="_blank" onclick="PageRedirect('Security');"><img src="../webcontent/portal/images/Adecco/security-icon (1).png" alt="featureLink" class="featureImg" width="50" height="50"/>&nbsp;&nbsp;Security Access Request Form</a></td>
					</tr>
					<tr>
						<td width="100%"><a href="http://tiny.cc/pq036y" class="featureLink" target="_blank" onclick="PageRedirect('Equipement');"><img src="../webcontent/portal/images/Adecco/security-icon (1).png" alt="featureLink" class="featureImg" width="50" height="50"/>&nbsp;&nbsp;Commande d'Ã©quipement (QuÃ©bec)</a></td>
					</tr>
					<tr>
						<td width="100%"><a href="http://tiny.cc/6mq46y" class="featureLink" target="_blank" onclick="PageRedirect('Resources');"><img src="../webcontent/portal/images/Adecco/security-icon (1).png" alt="featureLink" class="featureImg" width="50" height="50"/>&nbsp;&nbsp;Ressources quÃ©bÃ©coises</a></td>
					</tr>
                    <tr>
                        <td colspan="1">&nbsp;</td>
                    </tr>
                </table>
            </div>
        </div>
        <div id="col2outer">
            <div id="col2mid">
			<div id="search" class="sections" height=700>                    
					<table width=100% height="700">
					
					<tr>
						<td>
							<b>Welcome to the Self-help Knowledge Base!</b>
						</td>												
					</tr>
					<tr>
                        <td colspan="1">&nbsp;</td>
                    </tr>
					<tr>
						<td>
						&#8226;&#160; &#160;If you type in Adecco and then a keyword and press Enter, you will see a list of Adecco specific self-help articles that are available for that search.
						</td>
					</tr>
					<tr>
                        <td colspan="1">&nbsp;</td>
                    </tr>
					<tr>
						<td>
						&#8226;&#160; &#160;Or, you can simply type in a question and press Enter and Get Answers will show you a list of all the articles it considers most relevant. 
						</td>
						
					</tr>
					<tr>
						<td>
							<iframe src="https://portalqc.compucom.com/webcontent/areas/portalsolution/Bold360/2090.html?user=Roberto.Espinosa@compucom.com" name="test" height="700" width="100%">You need a Frames Capable browser to view this content.</iframe> 
						</td>
					</tr>
					</table>  
				</div>
                <!-- <div id="kb" class="sections">
                    <p class="sectionHeading">Get Answers</p>
                    <p><img src="../webcontent/portal/images/Self_Help_dark.png" alt="Knowledge Search" class="featureImg" /><span class="subHeading">Search Knowledge</span></p>
                     <div class="search-bar" style="width: 98%">
                            <input id="inputSearchTerm" type="text" class="searchtermfield" placeholder="Search the Knowledgebase"
                                style="width: 90%" />
                            <a href="javascript:void(0)" class="search-buttom-container" onclick="getTopSearchResults()">
                                <img alt="Get Answers" style="border: 0; height: 30px" src="Newimg/glass.png" />
                            </a>
                        </div>
                     <div id="KArticles" class="sections" style="display: none;border:none !Important;">
                            <p class="sectionHeading">
                                Search Results</p>
                                <div id="loadtopsearch" style="display:none">
                                
                                </div>
                                <div id="ErrorsearchResult" style="color:#f71717;display:none">
                           
                                </div>
                            <div id="topsearchresults" style="height: 350px; overflow: scroll; display:none">   
                                <ul id="topsearchList" class="featureLink top10" style="border:none !Important;">
                                </ul>
                                <a href="javascript:void(0)" id="showMoreList" onclick="showTopsearchrecords()" > More... </a>
                            </div>
                           
                        </div>
                    <br />
                    
                </div> -->
               <!--  <div id="top10" class="sections"> -->
                   <!-- <p class="sectionHeading">Top Solutions</p>
                    <div id="top10Solutions">
                        <ul id="top10List" class="featureLink top10" style="border:none !Important;"></ul>
                    </div>
                        <div><a href="javascript:void(0)" id="idShowlist" onclick="showToprecords()"></a></div>-->
                <!-- </div> -->
            </div>
            <div id="col2side">
                <div id="serviceAlerts" class="sections">
                    <p class="sectionHeading">Service Alerts</p>
                    <div id="ServiceAlerts">
                        <marquee id="alertScroll" direction="up" height="200px" scrollamount="2" onmouseover="stop();" onmouseout="start();"></marquee>
                    </div>
                </div>
                <div id="activeTickets" class="sections">
                    <p><span class="sectionHeading">My Active Tickets</span></p>
                    <div id="tickets">
                          <div id="GetMyActiveTasks" class="activeTask"></div>
                    </div>
                    <br /><span><a href="../Service/MyRequests.aspx" class="featureLink">All Tickets...</a></span><br/><br/>
                </div>
            </div>
        </div>
    </div>



    </div>


    <div id="incidentSlider_detailPane" style="display: none; margin: 0px; border: 0px; padding: 0px">
        
<style>
    .k-state-active:hover
    {
	    background-color: inherit;
    }
    .k-grid table {
        table-layout: fixed;
    }
    #tblHistory .k-grid {
              border:0;
    }
</style>

<script id="HistoryRowTemplate" type="text/x-kendo-template">
    <tr data-uid="#= uid #" class="assignment-table-row1 k-master-row">
        <td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>
        <td><strong>#: formatSNDateString(update_time) # <span style="color:Blue">#: user_name # </span></strong></td>
    </tr>
</script>

<script id="HistoryAltRowTemplate" type="text/x-kendo-template">
    <tr data-uid="#= uid #" class="assignment-table-row1 k-master-row">
        <td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>
        <td><strong>#: formatSNDateString(update_time) # <span style="color:Blue">#: user_name # </span></strong></td>
    </tr>
</script>

<script id="HistoryDetailRowTemplate" type="text/x-kendo-template">
    <tr data-uid="#= uid #">
        <td style="padding:0;height:8px;background-color:White;word-wrap: break-word"><span style="font-size:smaller;color:Green">#: label #:</span> #: fixString(_new) #<span style="font-size:smaller;color:Green"> was:</span> 
            <span style="color:Gray">
                #if(old==""){#
                    (Empty)
                #}else{#
                    #: fixString(old) #
                #}#
            </span>
        </td>
    </tr>
</script>

<script id="HistoryDetailAltRowTemplate" type="text/x-kendo-template">
    <tr data-uid="#= uid #" class="k-alt" >
        <td style="padding:0;height:8px;word-wrap: break-word"><span style="font-size:smaller;color:Green">#: label #:</span> #: fixString(_new) #<span style="font-size:smaller;color:Green"> was:</span> 
            <span style="color:Gray">
                #if(old==""){#
                    (Empty)
                #}else{#
                    #: fixString(old) #
                #}#
            </span>
        </td>
    </tr>
</script>

<script id="WorkNotesRowTemplate" type="text/x-kendo-template">
    <tr data-uid="#= uid #">
        <td style="word-wrap: break-word"><strong>#: formatSNDateString(sys_created_on) # <span style="color:Blue">#: sys_updated_by # </span></strong><BR>
        #var data = value.split('\n');
        for(i=0;i<=data.length-1;i++)
        {#
         #: fixString(data[i]) #
            <BR>
        #}#
        </td>
    </tr>
</script>

<script id="WorkNotesAltRowTemplate" type="text/x-kendo-template">
    <tr data-uid="#= uid #" class="k-alt">
        <td style="word-wrap: break-word"><strong>#: formatSNDateString(sys_created_on) # <span style="color:Blue">#: sys_updated_by # </span></strong><BR>
        #var data = value.split('\n');
        for(i=0;i<=data.length-1;i++)
        {#
         #: fixString(data[i]) #
            <BR>
        #}#
        </td>
    </tr>
</script>

<script id="AdditionalCommentsRowTemplate" type="text/x-kendo-template">
    <tr data-uid="#= uid #">
        <td style="word-wrap: break-word"><strong>#: formatSNDateString(sys_created_on) # <span style="color:Blue">#: sys_created_by # </span></strong><BR>
        #var data = value.split('\n');
        for(i=0;i<=data.length-1;i++)
        {#
         #: fixString(data[i]) #
            <BR>
        #}#
        </td>
    </tr>
</script>

<script id="AdditionalCommentsAltRowTemplate" type="text/x-kendo-template">
    <tr data-uid="#= uid #" class="k-alt">
        <td style="word-wrap: break-word"><strong>#: formatSNDateString(sys_created_on) # <span style="color:Blue">#: sys_created_by # </span></strong><BR>
        #var data = value.split('\n');
        for(i=0;i<=data.length-1;i++)
        {#
         #: fixString(data[i]) #
            <BR>
        #}#
        </td>
    </tr>
</script>


<script type="text/javascript">
    var COMPANY;
    var Incident_Sys_ID;
    var IncidentNumber;
    var resolvedBypass = false;
    var historyList;
    var prevIncState; //stores the old text for the combobox incient state
    var control = true; //help to avoid an infintiy loop with the change even of the comboboxes
    var userEmail = "";  //stores the email of the caller
    var callerSys_ID = "";  //Sysid of the caller
    var assignedSys_ID = ""; //Sysid of the assigned to
    var groupSys_ID = ""; //Sysid of the assigned group
    var cmdb_ciSys_ID = ""; //Sysid of the configuration item
</script>


<script type="text/javascript">
    $(function () {
        $("#incidentSummaryPanel").scroll(function () {
           // movepopupwindow2();
        });
        window.setInterval(checkAttachment, 500);
        $("#GroupSearchType").kendoDropDownList();
        $("#CISearchType").kendoDropDownList();
        // ***************************************************************************
        // ************************** INCIDENTS COMBOBOXES ***************************
        // ***************************************************************************
        var baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/SNChoiceListWS.asmx/";
        $("#usIncidentSlider_ucDetails_cmbAccion").kendoDropDownList();
        FillDropDown(baseURL, "getChoiceListComp", "cmbState", "task", "state", "", null);
        var isCB = FillDropDown(baseURL, "getChoiceListComp", "cmbIncState", "incident", "incident_state", "", null);
        isCB.bind("change", function (e) {
            if (control) {
                var selectedText = $("#cmbIncState").data("kendoDropDownList").text();

                if (selectedText == "Closed" && resolvedBypass == "0") {
                    //selecting an option of the combobox fires up the change event again, we use the var control
                    //to avoid and infinity loop
                    control = false;
                    $("#cmbIncState").data("kendoDropDownList").select(function (dataItem) { return dataItem.label === prevIncState; });
                    alert("The company does not allow bypass to closed state");
                    control = true;
                }
                else
                    prevIncState = selectedText;
            } // ************* END CONTROL IF
        }); // ***************** END CHANGE EVENT
        
        $("#UsersGrid").kendoGrid({
            height: 300,
            scrollable: false,
            dataSource: [{ name: "", user_id: "", location: "", company: ""}],
            columns: [
                { field: "user", title: "Name" },
                { field: "groupNm", title: "Assignment Group" }
            ]
        });
    });
</script>


<script type="text/javascript">

    function AskInfo(args) {
        loading(args);
        var baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/IncidentWS.asmx/";
        var params = { eventArgument: args, forWhom: "caller" };
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            async: true,
            data: kendo.stringify(params),
            url: baseURL + "getIncidentDetail",
            success: function (data) {
                if (data.d.Data.error && data.d.Data.error != '') {
                    //$.publish('common/controls/leftnav/displayMessageWindow', ['info', 'red', data.d.Data.error]);
                } else {
                    FillInfo (data.d.Data.iteminfo);
                }
            }
        });
    }

    function loading(args) {
        var elements = args.split('|');
        switch (elements[0]) {
            case 'A':
                $("#lblIncident")[0].innerHTML = elements[1];
                $("#imgLoadingSP")[0].style.display = "";
                break;
            case 'B':
                break;
            case 'C':
                $("#imgLoadingSP")[0].style.display = "";
                break;
        }
        try {
            //$("#cmdSave")[0].disabled=true;
        } catch (e) { }
    }

    function ConfigureFields(incidentState,permit) {
        $("#cmbIncState").data("kendoDropDownList").enable(false);
        $("#txt_Phone")[0].disabled = "true";
        $("#txtShortDescription")[0].disabled = "true";
        $("#txtDescription")[0].readOnly = "true";
        $("#txtDescription")[0].style.color = "Grey";
        $("#txtResolution")[0].disabled = "true";
        $("#txtResolution")[0].style.color = "Grey";
        //$("#cmdSave")[0].style.display = "none";

        if (incidentState != "Closed") {
        
            // Assignment Group = Resolver Group
            if (permit > 0) {
                //$("#cmdSave")[0].style.display = "";
                if (permit>1) {
                    if (incidentState != "Resolved") {
                        $("#txtDescription")[0].readOnly = "";
                        $("#txtDescription")[0].disabled = "";
                        $("#txtDescription")[0].style.color = "";
                    }
                }
            }
        }
    }

    function AdjustPriority() {
        var impact = $("#cmbImpact").data("kendoDropDownList");
        var urgency = $("#cmbUrgency").data("kendoDropDownList");
        var priority = $("#cmbPriority").data("kendoDropDownList");

        switch (impact.value()) {
            case "1":
                switch (urgency.value()) {
                    case "1":
                        priority.value("1");
                        break;
                    case "2":
                        priority.value("2");
                        break;
                    case "3":
                        priority.value("3");
                        break;
                    default:
                }
                break;
            case "2":
                switch (urgency.value()) {
                    case "1":
                        priority.value("2");
                        break;
                    case "2":
                        priority.value("3");
                        break;
                    case "3":
                        priority.value("4");
                        break;
                    default:
                }
                break;
            case "3":
                switch (urgency.value()) {
                    case "1":
                        priority.value("3");
                        break;
                    case "2":
                        priority.value("4");
                        break;
                    case "3":
                        priority.value("5");
                        break;
                    default:
                }
                break;
            default:
        }
    } // ************************ END AdjustPriority **********************************

    function ValidateIncident()
    {
        var incidentState = $("#cmbIncState").data("kendoDropDownList");
        var closedNotes = $("#txtResolution")[0];
        var configurationItem = $("#txtCI")[0];
        if ((incidentState.text() == "Closed" || incidentState.text() == "Resolved") && closedNotes.value == "") {
            if (incidentState.text() == "Active" && configurationItem.value == "")
                $("#valCI")[0].style.display = "";
            else
                $("#valCI")[0].style.display = "none";
            $("#valCloseNotes")[0].style.display = "";
            $("#txtResolution")[0].focus();
            return false;
        }
        else {
            $("#valCloseNotes")[0].style.display = "none";
            if (incidentState.text() == "Active" && configurationItem.value == "") {
                $("#valCI")[0].style.display = "";
                $("#lnkSearchCI")[0].focus();
                return false;
            }
            else
                $("#valCI")[0].style.display = "none";
        }
        return true;
    } // *************************** END ValidateIncident **************************************
</script>


<script type="text/javascript">
    var imageTimer;
    var action;

    //Callback function called from server to fill all the information of the incident
    function FillInfo(args) {
        if (args.search("Error@@") > -1) {
            $("#errorMsg")[0].style.display = "";
            args = args.slice(7);
        }
        else
            $("#errorMsg")[0].style.display = "none";
        //Set event handlers for the cancel and popup buttons
        $("#cmdCancel").bind("click", function () {
            $("#confirmCancelIncidentModal").kendoWindow({
                draggable: false,
                modal: true,
                title: "Confirm Cancel Incident",
                width: "500px",
                visible: false,
                iframe: false,
                position: {
                    top: "15%",
                    left: "35%"
                }
            }).data("kendoWindow").open();
            $("html, body").animate({ scrollTop: "0px" }, "fast");
        });

        $("#btnno").bind("click", function () {
            $("#confirmCancelIncidentModal").data("kendoWindow").close();
        });

        $("#btnyes").bind("click", function () {
            var closeNotes = $("#txtResolution").val().trim();
            var methodUrl = window.location.protocol + "//" + window.location.host + "/WebServices/IncidentWS.asmx/cancelIncident";
            $.ajax({
                contentType: "application/json; charset=utf-8",
                async: true,
                url: methodUrl,
                data: JSON.stringify({ "incidentNumber": IncidentNumber, "closeNotes": closeNotes }),
                //data: '{"incidentNumber":"' + IncidentNumber + '"}',
                dataType: 'json',
                success: function (response) {
                    $("#confirmCancelIncidentModal").data("kendoWindow").close();
                    if (response.d.Data.success == true) {
                        location.reload();
                    }
                },
                type: 'POST'
            });
            /*AjaxCall(methodUrl, JSON.stringify({ incidentNumber: IncidentNumber }), function (response) {
            $("#confirmCancelIncidentModal").data("kendoWindow").close();
            if (response.Data.success === true) {
            location.reload();
            }
            });*/
        });

        var data = args.split('|');
        $("#cmdCancel").show();
        //If the incident state is closed or Resolved, dont show Cancel button
        if (data[37].toLowerCase() == 'closed' || data[37].toLowerCase() == 'resolved') {
            $("#cmdCancel").hide();
//            $("#cmdAtachments").hide();
//            $("#cmdEmail").hide();
            $("#cmdSave").hide();
            $("#txtAdditionalComment")[0].disable = "true";
            $("#txtAdditionalComment")[0].readOnly = "true";
        }
        else {
            $("#cmdCancel").show();
//            $("#cmdAtachments").show();
//            $("#cmdEmail").show();
            $("#cmdSave").show();
            $("#txtAdditionalComment")[0].disable = "";
            $("#txtAdditionalComment")[0].readOnly = "";
        }
        
        switch (data[0]) {
            case "C": //Update data
                $("#imgSaved")[0].style.display = "";
                imageTimer = window.setInterval(function () { $("#imgSaved")[0].style.display = "none"; window.clearInterval(imageTimer); }, 6500);
                //$("#incident_grid").data("kendoGrid").dataSource.read();
            case "A": //Incident data
                if (data[0] == "A")
                    $("#imgSaved")[0].style.display = "none";
                $("#valCloseNotes")[0].style.display = "none";
                IncidentNumber = $("#lblIncident")[0].innerHTML = data[1];
                
                $("#txtCallName")[0].value = data[2];
                $("#txtUserName")[0].value = data[3];
                
                userEmail = data[4];
                if (data[5] == "1") {
                    $("#txtCallName")[0].style.backgroundColor = "yellow";
                    $("#txtCallName")[0].value = $("#txtCallName")[0].value + " (VIP Yes)";
                }
                else
                    $("#txtCallName")[0].style.backgroundColor = "";
                $("#txt_Phone")[0].value = data[6];
                $("#txtShortDescription")[0].value = data[7];
                $("#txtDescription")[0].value = data[8];
                $("#txtResolution")[0].value = data[16]; //close Notes
                $("#txtOpened")[0].value = formatSNDateString(data[21]);
                $("#txtUpdated")[0].value = formatSNDateString(data[23]);
                $("#txtResolved")[0].value = formatSNDateString(data[27]);
                $("#txtClosed")[0].value = formatSNDateString(data[28]);
                $("#cmbIncState").data("kendoDropDownList").select(function (dataItem) { return dataItem.label === data[37]; });
                prevIncState = data[37];
                Incident_Sys_ID = data[38];
                COMPANY = data[39];
                action = data[46];

                callerSys_ID = data[47];
                assignedSys_ID = data[48];
                cmdb_ciSys_ID = data[49];
                groupSys_ID = data[50];

                // ************************************************************************
                // **************************** INCIDENTS GRIDS ***************************
                // ************************************************************************
                baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/SNSysJournalFieldWS.asmx/";
                $("#tblAdditionalComments")[0].innerHTML = "";
                $("#txtAdditionalComment")[0].value = "";

                FillGridWithRowTemplates("tblAdditionalComments",
                    { field: "sys_created_on", dir: "desc" },
                    [
                        { field: "element_id", value: Incident_Sys_ID, operator: "=", logic: "" },
                        { field: "element", value: "comments", operator: "=", logic: "" },
                    ],
                    baseURL, "getSysJournalField",
                    [{ sys_created_by: { type: "string"} }, { sys_created_on: { type: "date"} }, { value: { type: "string"}}],
                    [{ title: "Additional Comments"}],
                    "AdditionalCommentsRowTemplate", "AdditionalCommentsAltRowTemplate"
                );

                ConfigureFields(data[37], data[42]);
                $("#imgLoadingSP")[0].style.display = "none";
                try {
                    $("#cmdSave")[0].disabled = false;
                } catch (e) { }
                break;
            case "B": //Caller pop up
                $("#txtCallerName")[0].value = data[1];
                $("#txtBusinessPhone")[0].value = data[2];
                $("#txtTitle")[0].value = data[3];
                $("#txtMobilePhone")[0].value = data[4];
                $("#txtUserID")[0].value = data[5];
                $("#chkVIP")[0].checked = data[6] == "1" ? true : false;
                $("#txtEmail")[0].value = data[7];
                $("#txtUserType")[0].value = data[8];
                $("#txtNotes")[0].innerText = data[9];
                break;
            case "D": //Assignemnt group pop up
                $("#txtGrpCompany")[0].value = data[1];
                $("#txtGrpParent")[0].value = data[2];
                $("#txtgrpName")[0].value = data[3];
                break;
            case "E": //Assigned to pop up
                $("#txtAssgName")[0].value = data[1];
                $("#txtAssgBPhone")[0].value = data[2];
                $("#txtAssgTitle")[0].value = data[3];
                $("#txtAssgMPhone")[0].value = data[4];
                $("#txtAssgUserID")[0].value = data[5];
                $("#chkAssgVIP")[0].checked = data[6] == "1" ? true : false;
                $("#txtAssgEmail")[0].value = data[7];
                $("#txtAssgType")[0].value = data[8];
                $("#txtAssgNotes")[0].innerText = data[9];
                break;
            case "F": //Fill Configuration Item
                $("#txtCIName")[0].value = data[1];
                $("#txtCIClass")[0].value = data[2];
                $("#txtCISLASupTier")[0].value = data[3];
                $("#txtCICost")[0].value = data[4];
                $("#txtCIAssettag")[0].value = data[5];
                $("#txtCIPONumber")[0].value = data[6];
                $("#txtCIManufacturer")[0].value = data[7];
                $("#txtCIInvoice")[0].value = data[8];
                $("#txtCIVendor")[0].value = data[9];
                $("#txtCIPurchased")[0].value = data[10];
                $("#txtCIModel")[0].value = data[11];
                $("#txtCIInstalled")[0].value = data[12];
                $("#txtCISerialNum")[0].value = data[13];
                $("#txtCIStatus")[0].value = data[14];
                $("#txtCIWarranty")[0].value = data[15];
                $("#txtCIOpStatus")[0].value = data[16];
                $("#txtCIAssigned")[0].value = data[17];
                $("#txtCILocation")[0].value = data[18];
                $("#txtCIAssignedTo")[0].value = data[19];
                $("#txtCIDepartament")[0].value = data[20];
                $("#txtCISent")[0].value = data[21];
                $("#txtCIConf")[0].value = data[22];
                $("#txtCIReturned")[0].value = data[23];
                $("#txtCIMaintenance")[0].value = data[24];
                $("#txtCIJustification")[0].value = data[25];
                $("#txtCIComments")[0].innerText = data[26];
                break
        }
    }
    
    function UpdateString() {
        var updateString;
        updateString = "UpdateByCaller|";
        updateString = updateString + $('#lblIncident')[0].innerHTML + "|";
        updateString = updateString + $("#txtDescription")[0].value + "|";
        updateString = updateString + $("#txtAdditionalComment")[0].value + "|";
        updateString = updateString + assignedSys_ID
        return updateString;
    }

    function checkAttachment() {
        var cookie = document.cookie;
        var start = cookie.indexOf("ResAttachmentsX=");

        if (start == -1)
            cookie = null;
        else {
            start = cookie.indexOf("=", start) + 1;
            var end = cookie.indexOf(";", start);
            if (end == -1)
                end = cookie.length;
            cookie = unescape(cookie.substring(start, end));
        }
        if (cookie != null) {
            var date = new Date();
            date.setTime(date.getTime() - 30000);
            var expires = "; expires=" + date.toGMTString();
            document.cookie = "ResAttachmentsX=1;" + expires;
            AskInfo('A|' + $('#lblIncident')[0].innerHTML);
        }
    }

    function detailInit(e) {
        try {
            var historySet = $.grep(historyList, function (v) {
                return v.update == e.data.update;
            });
            $("<div/>").appendTo(e.detailCell).kendoGrid({
                dataSource: historySet,
                scrollable: false,
                groupable: false,
                filterable: false,
                editable: false,
                columns: [
                    { title: "",
                        headerAttributes: { style: "display: none" }
                    },
                ],
                rowTemplate: kendo.template($("#HistoryDetailRowTemplate").html()),
                altRowTemplate: kendo.template($("#HistoryDetailAltRowTemplate").html())
            });
        } catch (e) {

        }
    } // ******************* END detailInit ***********************************
</script>


<script type="text/javascript">
    
    function closeDetailSlideOut(){
        $("#incidentSlider_detailPane").data("kendoWindow").close();
    }

</script>
       
<div>
    <div id="testData"></div>
    <table cellpadding="0" style="width: 97.2%; margin: 10px 0px;" class="DetailsTitle">
        <tr>
            <td style="width:auto;width: auto; text-indent: 13px;">
                <label href="javascript:void(0)" id="lblIncident" class="mainTitleLink">INC1234567890</label>
                &nbsp;<img id="imgLoadingSP" alt="Loading ..." src="/webcontent/Areas/PortalSolution/Styles/Kendo/Default/loading-image.gif"  height="22px" width="22px" style="margin-bottom:-5px;"/>
                <input id="hdCompanySys_ID" type="hidden" />
            </td>
            <td valign="top" align="right">
                        <span id="errorMsg" style="display:none">Error - Record not updated</span>
                        <img id="imgSaved" alt="" src="/webcontent/Areas/PortalSolution/Images/Img/SaveMessageShort.png" style="position:relative; vertical-align:middle;display:none" />

                        <input id="cmdCancel" class="dark_green_button" type="button" value="Cancel Incident" />
                        <input id="cmdAtachments" class="dark_green_button" type="button" value="Attach" onclick="window.open('../../Service/Attachments.aspx?sysid=' + Incident_Sys_ID + '&inc=' + IncidentNumber + '&attach_type=inc','_blank','menubar=no,resizable=no,status=no,scrollbars=yes,toolbar=no,height=500,location=no,titlebar=no,width=400, left=350, top=100')" />
                        <input id="cmdEmail" class="dark_green_button" type="button" value="Email" onclick="window.open('../../Service/Email.aspx?inc=' + $('#lblIncident')[0].innerHTML + '&to=' + userEmail,'_blank','menubar=no,resizable=no,status=no,toolbar=no')" />
                        <input id="cmdSave" class="dark_green_button" type="button" value="Save" onclick="loading('C|'); var args=UpdateString(); AskInfo(args); AskInfo('A|' + $('#lblIncident')[0].innerHTML);" />
            </td>
           
        </tr>
    </table>


     <div class="Details"  id="incidentSummaryPanel" style="">

    <table cellpadding="0" style="width:100%; font-size:small" >
        <tr>
            <td>
                <span class="fieldTitle">Caller</span></td>
            <td>
                <span class="fieldTitle">User ID</span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtCallName" disabled="disabled" class="k-textbox" style="font-size:14px;" />
                
            </td>
            <td>
                <input type="text" id="txtUserName" disabled="disabled" class="k-textbox" 
                    style="font-size:14px;" readonly="readonly" />
            </td>
        </tr>
        <tr>
            <td>
                <span class="fieldTitle">Alternate Phone</span>
            </td>
            <td>
                <span class="fieldTitle">Incident State</span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txt_Phone" disabled="disabled" class="k-textbox" style="font-size:14px;" />
            </td>
            <td>
                <div id="cmbIncState" class="FullDetailsComboBox"></div>
            </td>
        </tr>
    </table>

    <div>
            

        <table id="tblDetails" style="width:100%; font-size:small">
            <tr>
                <td style="width:50%">
                    <span class="fieldTitle">Short Description</span>
                </td>
                <td>
                    &nbsp;</td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="text" id="txtShortDescription" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
                </td>
            </tr>
            <tr>
                <td>
                    <span class="fieldTitle">Description</span>
                </td>
                <td>
                    &nbsp;</td>
            </tr>
            <tr>
                <td colspan="2">
                    <textarea rows="2" cols="20" id="txtDescription" class="k-textbox" style="font-size:14px;height:100px;width:90%;"></textarea>
                </td>
            </tr>
            </table>
    </div>
 
    <div>

        <table id="tblResolution" style="width:100%; font-size:small">
            <tr>
                <td>
                    <span class="fieldTitle">Close Notes</span>&nbsp<span id="valCloseNotes" class="RequiredText" style="display:none">* Required</span>
                </td>
                <td>
                    &nbsp;</td>
            </tr>
            <tr>
                <td colspan="2">
                    <textarea rows="2" cols="20" id="txtResolution" class="k-textbox" style="font-size:14px;height:55px;width:90%;"></textarea>
                </td>
            </tr>
        </table>
    </div>

    
    <table id="tblVisibleComments" style="width:100%; font-size:small">
        <tr>
            <td><span class="fieldTitle">Additional Comment</span> </td>
        </tr>
        <tr>
            <td>
                <!-- <input type="text" id="txtAdditionalComment" class="k-textbox FullDetailsLongTextBox" />-->
                <textarea rows="2" cols="20" id="txtAdditionalComment" class="k-textbox" style="font-size:14px;height:55px;width:90%; "></textarea>
            </td>
        </tr>
        <tr>
            <td><br />
                <div id="tblAdditionalComments" style="width:95%"></div>
            </td>
        </tr>
    </table>

    

    <table id="tblStats" style="width:100%; font-size:small">
        <tr>
            <td><span class="FieldTitle">Opened</span></td>
            <td><span class="FieldTitle">Updated</span></td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtOpened" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
            <td>
                <input type="text" id="txtUpdated" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
        </tr>
        <tr>
            <td><span class="FieldTitle">Resolved</span></td>
            <td><span class="FieldTitle">Closed</span></td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtResolved" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
            <td>
                <input type="text" id="txtClosed" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
        </tr>
    </table>
    
    <br />
    </div>
    <div id="confirmCancelIncidentModal" style="display:none" >
        <div class="modalContentSection">Are you sure you want to cancel this incident?</div>
        <div class="modalBtnSection">
            <button id="btnyes" class="dark_green_button">Yes</button>
            <button id="btnno" class="dark_green_button">No</button>
        </div>   
    </div>
</div>







    </div>
    <div id="requestSlider_detailPane" style="display: none; margin: 0px; border: 0px; padding: 0px ;margin-left:10px;" >
        
<style>
    .k-state-active:hover
    {
        background-color: inherit;
    }
    .k-grid table
    {
        table-layout: fixed;
    }
    #tblHistory .k-grid
    {
        border: 0;
    }
</style>

<script id="AdditionalCommentsRowTemplateReq" type="text/x-kendo-template">
    <tr data-uid="#= uid #">
        <td style="word-wrap: break-word"><strong>#: formatSNDateString(sys_created_on) # <span style="color:Blue">#: sys_created_by # </span></strong><BR>
        #var data = value.split('\n');
        for(i=0;i<=data.length-1;i++)
        {#
         #: fixString(data[i]) #
            <BR>
        #}#
        </td>
    </tr>
</script>

<script id="AdditionalCommentsAltRowTemplateReq" type="text/x-kendo-template">
    <tr data-uid="#= uid #" class="k-alt">
        <td style="word-wrap: break-word"><strong>#: formatSNDateString(sys_created_on) # <span style="color:Blue">#: sys_created_by # </span></strong><BR>
        #var data = value.split('\n');
        for(i=0;i<=data.length-1;i++)
        {#
         #: fixString(data[i]) #
            <BR>
        #}#
        </td>
    </tr>
</script>



<script type="text/javascript">

    var RequestItemNumber;
    
</script>
<script type="text/javascript">


    function AskInfoReq(args) {
        $("#reqimgLoadingSP")[0].style.display = "";
        var baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/SNRequestedItemsWS.asmx/";
        var params = { RequestID: args };
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            async: true,
            data: kendo.stringify(params),
            url: baseURL + "GetRequestedItemDetails",
            success: function (data) {
                if ((data.d.Data.error) == "Retrieving Request has failed.") {

                }
                else if ((data.d.Data.error) == "The request has timed out.") {

                }
                else {
                    var msg = jQuery.parseJSON(data.d.Data.Items);


                    FillInfoReq(msg.result[0]);
                }
            }

        });
    }
    function FillInfoReq(data) {


        RequestItemNumber = $("#lblReqItem")[0].innerHTML = data.number;
        RequestItem_sys_id =data.sys_id;

          $('#txtCompany').val(data.company);
          $('#txtRequest').val(data.request);
          $('#txtDomain').val(data.sys_domain);
          $('#txtRequestedfor').val(data["request.requested_for"]);
          $('#txtNumber').val(data.number);
          $('#txtReqforDate').val(data["request.requested_date"]);
          $('#txtReqAltphone').val(data["request.alternate_phone"]);
          $('#txtState').val(data.state);
          $('#txtItem').val(data.cat_item);
          $('#txtStage').val(data.stage);
          $('#txtReviewDate').val(data.due_date);
          $('#txtApprovalState').val(data.approval);
          $('#txtpriority').val(data.priority);
          $('#txtReqItemState').val(data.u_requested_item_state);
          $('#txtconfigurationItem').val(data.configuration_item);
          $('#txtCategory').val(data.u_category);
          $('#txtSubCategory').val(data.u_subcategory);
          $('#reqtxtShortDescription').val(data.short_description);
          $('#reqtxtDescription').val(data.description);
          if (data["request.requested_for.vip"] == "true") {
              $('#chkVIPreq').attr('checked',true);
          }
          else {
              $('#chkVIPreq').attr('checked', false);
          }
          $('#txtreqresponceCompleted').val(data.u_responded_on);
          $('#txtreqopenedby').val(data.opened_by);
          $('#txtreqopend').val(data.opened_at);
          $('#reqtxtcreatedby').val(data.sys_created_by);
          $('#txtreqcreated').val(data.sys_created_on);
          $('#txtrequpdatedby').val(data.sys_updated_by);
          $('#txtrequpdated').val(data.sys_updated_on);
          $('#txtreqclosedby').val(data.sys_closed_by);
          $('#txtreqclosed').val(data.closed_at);
          
          
          var commentsurl = window.location.protocol + "//" + window.location.host + "/WebServices/SNSysJournalFieldWS.asmx/";
          $("#tblAdditionalCommentsReq")[0].innerHTML = "";



          FillGridWithRowTemplates("tblAdditionalCommentsReq",
                    { field: "sys_created_on", dir: "desc" },
                    [
                        { field: "element_id", value: data.sys_id, operator: "=", logic: "" },
                        { field: "element", value: "comments", operator: "=", logic: "" },
                    ],
                    commentsurl, "getSysJournalField",
                    [{ sys_created_by: { type: "string"} }, { sys_created_on: { type: "date"} }, { value: { type: "string"}}],
                    [{ title: "Additional Comments"}],
                    "AdditionalCommentsRowTemplateReq", "AdditionalCommentsAltRowTemplateReq"
                );

          var baseURL = window.location.protocol + "//" + window.location.host + "/WebServices/SNRequestedItemsWS.asmx/";
          var params = { RequestID: data.sys_id };
          $.ajax({
              type: "POST",
              contentType: "application/json; charset=utf-8",
              async: true,
              data: kendo.stringify(params),
              url: baseURL + "GetQuestionaries",
              success: function (data) {
                  if ((data.d.Data.error) == "Retrieving Request has failed.") {

                  }
                  else if ((data.d.Data.error) == "The request has timed out.") {

                  }
                  else {
                      var msg = jQuery.parseJSON(data.d.Data.Items);
                      fillquestionnarie(msg);
                  }
              }

          });
          $("#reqimgLoadingSP")[0].style.display = "none";
    }

    function fillquestionnarie(data) {
        for (var i in data.result) {

            if (data.result[i]["sc_item_option.item_option_new.type"] == 'Multi Line Text') {
                $("#reqquetionnarie").append('<span class="fieldTitle">' + data.result[i]["sc_item_option.item_option_new"] + '</span> </br>');
                $("#reqquetionnarie").append('<textarea rows="2" cols="20" disabled="disabled" class="k-textbox fieldTitle" value="' + data.result[i]["sc_item_option.value"] + '" style="font-size:14px;height:100px;width:90%;"></textarea></br>');


            }
            else if (data.result[i]["sc_item_option.item_option_new.type"] == 'Reference' || data.result[i]["sc_item_option.item_option_new.type"] == 'Lookup Select Box') {
                $("#reqquetionnarie").append('<span class="fieldTitle">' + data.result[i]["sc_item_option.item_option_new"] + '</span> </br>');
                $("#reqquetionnarie").append('<input type="text" value="' + data.result[i]["sc_item_option.u_value_display_value"] + '"  disabled="disabled" class="k-textbox fieldTitle"  style="font-size:14px;" readonly="readonly" /></br>');
            }

            else {
                $("#reqquetionnarie").append('<span class="fieldTitle">' + data.result[i]["sc_item_option.item_option_new"] + '</span> </br>');
                $("#reqquetionnarie").append('<input type="text" value="' + data.result[i]["sc_item_option.value"] + '"  disabled="disabled" class="k-textbox fieldTitle"  style="font-size:14px;" readonly="readonly" /></br>');

            }
        }     }

</script>
<style type="text/css">
   
 .fieldTitle
    {
        margin-left:0px;
     
    }
</style>

<div>
    <div id="testDataReq"></div>
      <table cellpadding="0" style="width: 97.2%; margin: 10px 0px;" class="DetailsTitle">
        <tr>
            <td style="width:auto;width: auto; text-indent: 13px;">
                <label href="javascript:void(0)" id="lblReqItem" class="mainTitleLink">RITM1234567890</label>
                &nbsp;<img id="reqimgLoadingSP" alt="Loading ..." src="/webcontent/Areas/PortalSolution/Styles/Kendo/Default/loading-image.gif"  height="22px" width="22px" style="margin-bottom:-5px;"/>
                <input id="reqhdCompanySys_ID" type="hidden" />
            </td>
            <td valign="top" align="right">
                        <span id="reqerrorMsg" style="display:none">Error - Record not updated</span>
                        <img id="reqimgSaved" alt="" src="/webcontent/Areas/PortalSolution/Images/Img/SaveMessageShort.png" style="position:relative; vertical-align:middle;display:none" />&nbsp;
                        <input id="reqcmdAtachments" class="dark_green_button" type="button" value="Attach" onclick="window.open('../../Service/Attachments.aspx?sysid=' + RequestItem_sys_id + '&inc=' + RequestItemNumber + '&attach_type=req','_blank','menubar=no,resizable=no,status=no,scrollbars=yes,toolbar=no,height=500,location=no,titlebar=no,width=400, left=350, top=100')" />&nbsp;&nbsp;
            </td>
           
        </tr>
    </table>
    </div>
      <div class="Details"  id="requestSummaryPanel" style="">

    <table cellpadding="0" style="width:100%; font-size:small" >
        <tr>
            <td>
                <span class="fieldTitle">Company</span></td>
            <td>
                <span class="fieldTitle">Request</span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtCompany" disabled="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
              
            </td>
            <td>
                <input type="text" id="txtRequest" disabled="disabled" class="k-textbox fieldTitle" 
                    style="font-size:14px;" readonly="readonly" />
            </td>
        </tr>
        <tr>
            <td>
                <span class="fieldTitle">Domain</span>
            </td>
            <td>
                <span class="fieldTitle">Requested for </span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtDomain" disabled="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
            </td>
            <td>
                 <input type="text" id="txtRequestedfor" disabled="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
            </td>
        </tr>
        <tr>
            <td>
                <span class="fieldTitle">Number</span></td>
            <td>
                <span class="fieldTitle">Requested for date</span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtNumber" ="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
              
            </td>
            <td>
                <input type="text" id="txtReqforDate" disabled="disabled" class="k-textbox fieldTitle" 
                    style="font-size:14px;" readonly="readonly" />
            </td>
        </tr>
        <tr>
            <td>
                <span class="fieldTitle">altenate Phone</span>
            </td>
            <td>
                <span class="fieldTitle">State </span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtReqAltphone" disabled="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
            </td>
            <td>
                 <input type="text" id="txtState" disabled="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
            </td>
        </tr>
        <tr>
            <td>
                <span class="fieldTitle">Priority</span></td>
            <td>
                <span class="fieldTitle">Requested Item State</span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtpriority" disabled="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
              
            </td>
            <td>
                <input type="text" id="txtReqItemState" disabled="disabled" class="k-textbox fieldTitle" 
                    style="font-size:14px;" readonly="readonly" />
            </td>
        </tr>
        <tr>
            <td>
                <span class="fieldTitle">Item</span>
            </td>
            <td>
                <span class="fieldTitle">Stage  </span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtItem" disabled="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
            </td>
            <td>
                 <input type="text" id="txtStage" disabled="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
            </td>
        </tr>
        <tr>
            <td>
                <span class="fieldTitle">Review Date</span></td>
            <td>
                <span class="fieldTitle">ApprovalState</span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtReviewDate" disabled="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
              
            </td>
            <td>
                <input type="text" id="txtApprovalState" disabled="disabled" class="k-textbox fieldTitle" 
                    style="font-size:14px;" readonly="readonly" />
            </td>
        </tr>
        <tr>
            <td>
                <span class="fieldTitle">Configuration Item</span>
            </td>
            <td>
                <span class="fieldTitle">Category  </span>
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtconfigurationItem" disabled="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
            </td>
            <td>
                 <input type="text" id="txtCategory" disabled="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
            </td>
        </tr>
        <tr>
            <td>
                <span class="fieldTitle">VIP</span><input type="checkbox" id="chkVIPreq"   disabled="disabled" style="margin-left:-120px; margin-top:10px; font-size:14px;" />
            </td>
            <td>
                <span class="fieldTitle">Sub Category  </span>
            </td>
        </tr>
        <tr>
            <td>
                
            </td>
            <td>
                 <input type="text" id="txtSubCategory" disabled="disabled" class="k-textbox fieldTitle" style="font-size:14px;" />
            </td>
        </tr>

    </table>
    <div>
           

        <table id="reqtblDetails" style="width:100%; font-size:small">
            <tr>
                <td style="width:50%">
                    <span class="fieldTitle">Short Description</span>
                </td>
                <td>
                    &nbsp;</td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="text" id="reqtxtShortDescription" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
                </td>
            </tr>
            <tr>
                <td>
                    <span class="fieldTitle">Description</span>
                </td>
                <td>
                    &nbsp;</td>
            </tr>
            <tr>
                <td colspan="2">
                    <textarea rows="2" cols="20" id="reqtxtDescription" disabled="disabled" class="k-textbox" style="font-size:14px;height:100px;width:90%;"></textarea>
                </td>
            </tr>
            </table>
    </div>
 
    <table id="tblVisibleCommentsReq" style="width:100%; font-size:small">     
        <tr>
            <td><br />
                <div id="tblAdditionalCommentsReq" style="width:95%"></div>
                <br />
                <br />
             
      
            </td>
        </tr>
    </table>

     <table id="tblquestionnarie" style="width:100%; font-size:small">  
     <tr><th role="columnheader" data-field="" data-title="Questionnaire" class="k-header">Questionnaire</th></tr>
     
        <tr>
            <td><br />
                <div id="reqquetionnarie" style="width:95%"></div>
                <br />
            </td>
        </tr>
    </table>
    

   

    <table id="reqtblStats" style="width:100%; font-size:small">
      <tr><th role="columnheader" data-field="" data-title="Questionnaire" class="k-header" colspan="2">Stats</th></tr>
     
        <tr>
        <tr>
            <td><span class="FieldTitle">Response Completed</span></td>
            <td><span class="FieldTitle">Opened by</span></td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtreqresponceCompleted" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
            <td>
                <input type="text" id="txtreqopenedby" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
        </tr>
        <tr>
            <td><span class="FieldTitle">Opened</span></td>
            <td><span class="FieldTitle">Created by</span></td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtreqopend" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
            <td>
                <input type="text" id="reqtxtcreatedby" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
        </tr>
                <tr>
            <td><span class="FieldTitle">Created</span></td>
            <td><span class="FieldTitle">Updated by</span></td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtreqcreated" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
            <td>
                <input type="text" id="txtrequpdatedby" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
        </tr>
        <tr>
            <td><span class="FieldTitle">Updated</span></td>
            <td><span class="FieldTitle">Closed by</span></td>
        </tr>
        <tr>
            <td>
                <input type="text" id="txtrequpdated" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
            <td>
                <input type="text" id="txtreqclosedby" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
        </tr>
             <tr>
            <td><span class="FieldTitle">Closed</span></td>
            
        </tr>
        <tr>
            <td>
                <input type="text" id="txtreqclosed" disabled="disabled" class="k-textbox" style="font-size:14px;width:90%" />
            </td>
           
        </tr>

    </table>
    
    <br />
    </div>
    </div>

    <div id="ShowPhoneNumbers" style="padding: 0; vertical-align: top; display: none"
        title="Contact Numbers">
        <table style="width: 100%; margin: 0" cellspacing="0">
            <tr>
                <td style="text-align: center; font-weight: lighter">
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td style="text-align: center; font-weight: lighter">
                    US & Can: 972-856-3100
                </td>
            </tr>
            <tr>
                <td style="text-align: center; font-weight: lighter">
                    Mexico: 52-55-1500-3707
                </td>
            </tr>
            <tr>
                <td style="text-align: center; font-weight: lighter">
                    Cisco IPT & IPCC: *2473
                </td>
            </tr>
        </table>
    </div>

<div id="NewRequest" style="padding-left: 15px;" class="DetailsTitle">
        <table cellpadding="0" style="width:100%; font-size:small; text-align:left; color:#3d3d3d">
            <tr>
                <td style="text-align:left; padding:5px 5px 5px 5px">Caller</td>
                <td style="text-align:left; padding:5px 5px 5px 5px">User ID</td>
            </tr>
            <tr>
                <td style="text-align:left; padding:5px 5px 5px 5px">
                    <input name="ctl00$ContentPlaceHolder1$txtCaller" type="text" id="txtCaller" disabled="disabled" class="k-textbox" style="" />
                </td>
                <td style="text-align:left; padding:5px 5px 5px 5px">
                    <input name="ctl00$ContentPlaceHolder1$txtUserID" type="text" id="txtUserID" disabled="disabled" class="k-textbox" style="top: 0px; left: 0px" />
                </td>
            </tr>
            <tr>
                <td style="text-align:left; padding:5px 5px 5px 5px">
                    Business Phone
                </td>
                <td style="text-align:left; padding:5px 5px 5px 5px">
                    Alternate Phone
                </td>
            </tr>
            <tr>
                <td style="text-align:left; padding:5px 5px 5px 5px">
                    <input name="ctl00$ContentPlaceHolder1$txtPhone" type="text" id="txtPhone" disabled="disabled" class="k-textbox" style="" />
                </td>
                <td style="text-align:left; padding:5px 5px 5px 5px">
                    <input name="ctl00$ContentPlaceHolder1$txtAltPhone" type="text" id="txtAltPhone" class="k-textbox" />
                </td>
            </tr>
            <tr>
                <td style="width:50%; text-align:left; padding:5px 5px 5px 5px">Location
                </td>
                <td >
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td colspan="2" style="text-align:left; padding:5px 5px 5px 5px">
                    <input name="ctl00$ContentPlaceHolder1$txtLocation" type="text" id="txtLocation" disabled="disabled" class="k-textbox" style="width:90%;" />
                </td>
            </tr>
            <tr>
                <td style="width:50%; text-align:left; padding:5px 5px 5px 5px">
                    Description
                </td>
            </tr>
            <tr>
                <td colspan="2" style="padding:5px 5px 5px 5px">
                <textarea name="ctl00$ContentPlaceHolder1$txtDescriptionx" rows="2" cols="20" id="txtDescriptionx" class="k-textbox" style="height:76px;width:90%;font-size: small">
</textarea>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="padding:5px 5px 5px 5px">
                    <div id="createAttachments">
					    <div class="CCattachmentsDropWrapper" id="createDropZone">
                            <div class="CCattachmentsDropZone">
                                <h4 class="CCattachmentsDropText">Optional: Upload an image or a file to better assist us with your request.</h4>
                                <span class="CCattachmentsBtnWrapper">
                                    <button class="CCattachmentsBtn" data-role="button" onclick="uploadClick();">Select Files</button>
                                </span>
                            </div>
                        </div>
                        <div class="CCuploadWrapper">
                            <input type="file" id="createAttachmentBtn" name="createAttachmentBtn" multiple="" accept=".pdf,.csv,.png,.jpeg,.jpg,.doc,.docs,.xlsx,.xls,.docx,.html,.htm,.bmp">
                        </div>
				    </div>
                    <div class="CCfileAlert" id="createAttachAlert">The total file size cannot exceed 3.0 MB</div>     
                </td>       
            </tr>
            <tr>
               <td style="width:50%; text-align:left; padding:5px 5px 5px 5px">
                   <!-- Additional Comments-->
                </td>
            </tr>
            <tr>
                <td>
                &nbsp;
                </td>
            </tr>
            <tr>
               <td colspan="2" style="text-align:left; padding:5px 5px 5px 5px">
                   <!-- <textarea name="ctl00$ContentPlaceHolder1$txtComments" rows="2" cols="20" id="txtComments" class="k-textbox" style="height:76px;width:90%;font-size: small">
</textarea>-->
                </td>
            </tr>

        </table>

        <table style="width: 100%; font-size: small">
            <tr>
                <td style="text-align: left; width: 310px">
                    <input id="cmdClose" class="button" style="display: none" type="button" value="Close"
                        onclick="closeKendoWindow('NewRequest')" />
                    <input id="cmdNewIncident" class="button" type="button" value="Submit" onclick="sendNewIncident();" />
                </td>
                <td style="text-align: center">
                    <label id="lblNewIncNumber">
                    </label>
                </td>
            </tr>
        </table>
    </div>

    


    <div id="UserSearch" class="SearchOnFullDetails_Left" style="display: none; padding-left: 3px;
        padding-top: 3px; font-size: 12px">
        <table style="width: 96%; border-style: none">
            <tr>
                <td colspan="2">
                    <a href="javascript:void(0)" onclick="popup2('UserSearch','imgAssignedToSearch','left')">
                        <img src="Img/Close.png" width="10" height="10" alt="" style /></a>&nbsp;
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <span class="fieldTitle">User</span>
                </td>
            </tr>
            <tr>
                <td style="width: 155px; padding-right: 0; padding-bottom: 0; vertical-align: middle">
                    <input id="txtUserSearch" type="text" class="k-textbox" style="height: 34px" />
                </td>
                <td style="text-align: left; vertical-align: middle">
                    <a id="cmdUserSrch" href="javascript:void(0)" onclick="SearchUsers()">
                        <img src="Img/Users.png" alt="" title="Lookup User" /></a>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <div id="UsersGrid">
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div id="LocationSearch" class="SearchOnFullDetails_Left" style="display: none; padding-left: 3px;
        padding-top: 3px; font-size: 12px">
        <table style="width: 96%; border-style: none">
            <tr>
                <td colspan="3">
                    <a href="javascript:void(0)" onclick="popup2('LocationSearch','imgLocationSearch','left')">
                        <img src="img/Close.png" width="10" height="10" alt="" /></a>&nbsp;
                </td>
            </tr>
            <tr>
                <td>
                    <span class="fieldTitle">Location</span>
                </td>
                <td colspan="2">
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td style="padding-right: 0; padding-bottom: 0; padding-top: 0; width: 150px">
                    <select id="LocSearchType">
                        <option value="name">Name</option>
                        <option value="u_location_code">Location Code (EMI)</option>
                        <option value="street">Street</option>
                        <option value="city">City</option>
                        <option value="state">State/Province</option>
                        <option value="zip">ZIP/Postal Code</option>
                        <option value="parent">Location Parent</option>
                        <option value="country">Country</option>
                        <option value="company">Company</option>
                    </select>
                </td>
                <td style="padding-right: 0; padding-bottom: 0; padding-top: 9px; width: 150px">
                    <input id="txtLocationSrch" type="text" style="height: 34px" class="k-textbox" />
                </td>
                <td style="vertical-align: middle; padding-right: 0; padding-bottom: 0; padding-top: 0">
                    <a id="cmdLocationSrch" href="javascript:void(0)" onclick="SearchLocations()">
                        <img src="img/Users.png" style="vertical-align: middle" alt="" title="Lookup Location" /></a>
                </td>
                <td>
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td colspan="3" style="padding-top: 0">
                    <div id="LocationsGrid" style="font-size: 12px">
                    </div>
                </td>
                <td>
                    &nbsp;
                </td>
            </tr>
        </table>
    </div>
    <div id="idTopSolution" style="display:none">

    </div>
        <div id="hidDialog" style="display:none"></div>

    <div id="idServiceAlerts" style="display:none">
    </div>
    <div id="hidServicealert" style="display:none"></div>
    
                
                </div>
                <!-- Content End -->

                
<!-- Site Feedback model box start -->
<div class="modal fade sitefeedbackForm" data-backdrop="static" id="sitefeedback"
    style="display: none !important;" tabindex="-1" role="dialog" aria-labelledby="purchaseLabel"
    aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" onclick="clearAll()">
                    &times;</button>
                
                <h4 class="modal-title loginLabel">
                    Site Feedback:</h4>
            </div>
            <div class="col-md-12 feedbackForm" style="margin: 3em auto">
                <div class="form-group">
                    <label for="inputEmail3" class="col-sm-3 control-label">
                        <span style="color: red">*</span> Name:</label>
                    <div class="col-sm-8">
                        <input name="ctl00$SiteFeedbackcontrol$txtFeedbackName" type="text" value="Roberto Espinosa" id="ctl00_SiteFeedbackcontrol_txtFeedbackName" disabled="disabled" class="form-control txtFeedbackName" value="" />
                        <label for="inputEmail3" id="lblName" class="control-label"></label>
                        <span id="ctl00_SiteFeedbackcontrol_RequireFieldFirstname" class="errorMessage" style="color:Red;display:none;"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputEmail3" class="col-sm-3 control-label">
                        <span style="color: red">*</span> Email ID:</label>
                    <div class="col-sm-8">
                        <input name="ctl00$SiteFeedbackcontrol$txtFeedbackEmail" type="text" value="Roberto.Espinosa@compucom.com" id="ctl00_SiteFeedbackcontrol_txtFeedbackEmail" disabled="disabled" class="form-control txtFeedbackEmail" />
                        <label for="inputEmail3" id="lblemail" class="control-label"></label>
                        <span id="ctl00_SiteFeedbackcontrol_RequiredFieldValidatorforemail" class="errorMessage" style="color:Red;display:none;"></span>
                        <span id="ctl00_SiteFeedbackcontrol_regexEmailValid" class="errorMessage" style="color:Red;display:none;"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputEmail3" class="col-sm-3 control-label">
                        <span style="color: red">*</span> Comments:</label>
                    <div class="col-sm-8">
                        <textarea name="ctl00$SiteFeedbackcontrol$txtFeedbackComments" rows="3" cols="20" id="ctl00_SiteFeedbackcontrol_txtFeedbackComments" class="form-control txtComments">
</textarea>
                        <label for="inputEmail3" id="lblStatus" class="control-label">
                        </label>
                    </div>
                </div>
                
                <div class="okCanSection col-md-11">
                    <input type="button" class="button_Light" value="Send" onclick="Send()" />
                    <input type="button" data-dismiss="modal" class="button_Light" value="Cancel" onclick="clearAll()" />
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $('#lblStatus').text("");
    $(".txtComments").val("");
        
    var isvalid = true;
    $(document).ready(function () {

        var name = $(".txtFeedbackName").val();
        var emailid = $(".txtFeedbackEmail").val();
        var commenttext = $(".txtComments").val();
       
    });
    function reload() {
        location.reload();
    }
    function clearAll() {
        $('#lblStatus').text("");
        $('#lblemail').text("");
        $('#lblName').text("");

        $(".txtComments").val("");
        if (!($('.txtFeedbackName').is(':disabled'))) {

           
            $(".txtFeedbackName").val("");
            $(".txtFeedbackEmail").val("");
        }
        
    }
    function IsEmail(email) {
        var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if (!regex.test(email)) {
            isvalid = false;
            $('#lblemail').text("Please enter valid email ID");
            return false;
        } else {
        isvalid = true;
           
        }
    }
    
    function Send() {
        var name = $(".txtFeedbackName").val();
        var emailid = $(".txtFeedbackEmail").val();
        var commenttext = $(".txtComments").val(); ;

       
        if (name == "" | name == " " | name == "undefined" | name == null) {
            
            $('#lblName').text("Please enter your name").css("color", "red");
            return false;
        }
        else {
            $('#lblName').text("").css("display", "none");
            isvalid = true; ;
        }
        if (emailid == "" | emailid == "undefined") {

            $('#lblemail').text("Please enter your EmailID").css("color", "red");
            isvalid = false;
            return false;
        }
        else {
            isvalid = true;
            
        }
        if (emailid != "") 
        {
            if (IsEmail(emailid) == false)
             {

                 $('#lblemail').text("Please enter valid EmailID").css("color", "red");
                 isvalid = false;
                return false;

            }
            else {

                $('#lblemail').text("").css("display", "none");
                isvalid = true;
                
            }
        }

        if (commenttext == "" | commenttext == "undefined") {
            
            $('#lblStatus').text("Please enter your comments").css("color", "red");
            isvalid = false;
            return false;
        }
        
        if(isvalid==true)
       {

           $.ajax({

               type: "POST",
               url: "/Webservices/SiteFeedBackWS.asmx/SendSiteFeedback",

               data: JSON.stringify({ commenttext: commenttext, emailid: emailid, name: name }),
               contentType: "application/json; charset=utf-8",
               dataType: "json",
               success: function OnSuccess(response) {
                   $('#lblStatus').text("Thank you! Feedback sent successfully.").css("color", "green");

                   setTimeout(function () {

                       $('#lblStatus').text("");
                       $('#lblemail').text("");
                       $('#lblName').text("");
                       $('.txtComments').val('');
                       if (!($('.txtFeedbackName').is(':disabled'))) {


                           $(".txtFeedbackName").val("");
                           $(".txtFeedbackEmail").val("");
                       }
                       $('#sitefeedback').modal('hide')
                   }, 5000);

               },
               failure: function (response) {
                   $('#lblStatus').text("Sorry!  Unable to process your request at this time. Please try again later").css("color", "red");
               }

           });
        }
        function OnSuccess(response) {
           
            $('#lblStatus').text("Thank you!. Feedback Sent Successfully");
        }
    }
</script>
<!-- Site Feedback model box End -->

                
<!-- Footer Section Start -->



<div class="footerSection">
<div class="footerSectionAddr col-md-10" >
    <div class="poweredText">powered by CompuCom </div
</div>


</div>
        
<!-- Footer Section End -->
            </div>
            <!-- Main page Content End -->

        </div>
    </div>
    
<script type="text/javascript">
//<![CDATA[
var Page_Validators =  new Array(document.getElementById("ctl00_SiteFeedbackcontrol_RequireFieldFirstname"), document.getElementById("ctl00_SiteFeedbackcontrol_RequiredFieldValidatorforemail"), document.getElementById("ctl00_SiteFeedbackcontrol_regexEmailValid"));
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
var ctl00_SiteFeedbackcontrol_RequireFieldFirstname = document.all ? document.all["ctl00_SiteFeedbackcontrol_RequireFieldFirstname"] : document.getElementById("ctl00_SiteFeedbackcontrol_RequireFieldFirstname");
ctl00_SiteFeedbackcontrol_RequireFieldFirstname.controltovalidate = "ctl00_SiteFeedbackcontrol_txtFeedbackName";
ctl00_SiteFeedbackcontrol_RequireFieldFirstname.display = "Dynamic";
ctl00_SiteFeedbackcontrol_RequireFieldFirstname.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00_SiteFeedbackcontrol_RequireFieldFirstname.initialvalue = "";
var ctl00_SiteFeedbackcontrol_RequiredFieldValidatorforemail = document.all ? document.all["ctl00_SiteFeedbackcontrol_RequiredFieldValidatorforemail"] : document.getElementById("ctl00_SiteFeedbackcontrol_RequiredFieldValidatorforemail");
ctl00_SiteFeedbackcontrol_RequiredFieldValidatorforemail.controltovalidate = "ctl00_SiteFeedbackcontrol_txtFeedbackEmail";
ctl00_SiteFeedbackcontrol_RequiredFieldValidatorforemail.display = "Dynamic";
ctl00_SiteFeedbackcontrol_RequiredFieldValidatorforemail.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00_SiteFeedbackcontrol_RequiredFieldValidatorforemail.initialvalue = "";
var ctl00_SiteFeedbackcontrol_regexEmailValid = document.all ? document.all["ctl00_SiteFeedbackcontrol_regexEmailValid"] : document.getElementById("ctl00_SiteFeedbackcontrol_regexEmailValid");
ctl00_SiteFeedbackcontrol_regexEmailValid.controltovalidate = "ctl00_SiteFeedbackcontrol_txtFeedbackEmail";
ctl00_SiteFeedbackcontrol_regexEmailValid.display = "Dynamic";
ctl00_SiteFeedbackcontrol_regexEmailValid.evaluationfunction = "RegularExpressionValidatorEvaluateIsValid";
ctl00_SiteFeedbackcontrol_regexEmailValid.validationexpression = "\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*";
//]]>
</script>


<script type="text/javascript">
//<![CDATA[

WebForm_InitCallback();
var Page_ValidationActive = false;
if (typeof(ValidatorOnLoad) == "function") {
    ValidatorOnLoad();
}

function ValidatorOnSubmit() {
    if (Page_ValidationActive) {
        return ValidatorCommonOnSubmit();
    }
    else {
        return true;
    }
}
        
document.getElementById('ctl00_SiteFeedbackcontrol_RequireFieldFirstname').dispose = function() {
    Array.remove(Page_Validators, document.getElementById('ctl00_SiteFeedbackcontrol_RequireFieldFirstname'));
}

document.getElementById('ctl00_SiteFeedbackcontrol_RequiredFieldValidatorforemail').dispose = function() {
    Array.remove(Page_Validators, document.getElementById('ctl00_SiteFeedbackcontrol_RequiredFieldValidatorforemail'));
}

document.getElementById('ctl00_SiteFeedbackcontrol_regexEmailValid').dispose = function() {
    Array.remove(Page_Validators, document.getElementById('ctl00_SiteFeedbackcontrol_regexEmailValid'));
}
//]]>
</script>
</form>
    <!-- Latest compiled and minified JavaScript -->
    <script src="/Javascripts_Webcontent_Areas/bootstrap.min.js"> </script>
    <script src="/Javascripts_Webcontent_Areas/placeholder.js"> </script>
    
    <script src="/Javascripts_Webcontent_Areas/intro.min.js"> </script>
    <script src="/Javascripts_Webcontent_Areas/globalPage.js"> </script>
     <script type="text/javascript" language="javascript">
         $(function () {
             var headerTextCrnt = $(".k-grid-header");
             if (headerTextCrnt) {
                 headerTextCrnt.attr("data-step", "7");
                 headerTextCrnt.attr("data-intro", "<b>Current incidents </b><br>your open incidents are displayed here, click on the incident description to view details");
                 headerTextCrnt.attr("data-position", "left");

             }
         });
      </script>
                </body>
</html>
